# –õ–µ–∫—Ü–∏—è 26. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ. Middleware. Signals. Background Tasks. Messages. Manage commands

### –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞

<details>
  <summary>–ë–ª–æ–∫ 1 ‚Äî Python Basic (1‚Äì6)</summary>

  - [–õ–µ–∫—Ü–∏—è 1. –í–≤–µ–¥–µ–Ω–∏–µ. –¢–∏–ø–∏–∑–∞—Ü–∏–∏. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –°—Ç—Ä–æ–∫–∏ –∏ —á–∏—Å–ª–∞. –ë—É–ª–µ–≤–∞ –∞–ª–≥–µ–±—Ä–∞. –í–µ—Ç–≤–ª–µ–Ω–∏–µ](lesson01.md)
  - [–õ–µ–∫—Ü–∏—è 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π. –°–ø–∏—Å–∫–∏, —Å—Ç—Ä–æ–∫–∏ –¥–µ—Ç–∞–ª—å–Ω–µ–µ, —Å—Ä–µ–∑—ã, —Ü–∏–∫–ª—ã.](lesson02.md)
  - [–õ–µ–∫—Ü–∏—è 3. None. Range, list comprehension, sum, max, min, len, sorted, all, any. –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏](lesson03.md)
  - [–õ–µ–∫—Ü–∏—è 4. –•–µ—à-—Ç–∞–±–ª–∏—Ü—ã. Set, frozenset. Dict. Tuple. –ù–µ–º–Ω–æ–≥–æ –æ–± –∏–º–ø–æ—Ä—Ç–∞—Ö. Namedtuple, OrderedDict](lesson04.md)
  - [–õ–µ–∫—Ü–∏—è 5. –§—É–Ω–∫—Ü–∏–∏, —Ç–∏–ø–∏–∑–∞—Ü–∏—è, lambda. Map, zip, filter.](lesson05.md)
  - [–õ–µ–∫—Ü–∏—è 6. –ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö](lesson06.md)
</details>

<details>
  <summary>–ë–ª–æ–∫ 2 ‚Äî Git (7‚Äì8)</summary>

  - [–õ–µ–∫—Ü–∏—è 7. Git. –ò—Å—Ç–æ—Ä–∏—è —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π. –õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º.](lesson07.md)
  - [–õ–µ–∫—Ü–∏—è 8. Git. –£–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. Remote, push, pull. GitHub, Bitbucket, GitLab, etc. Pull request.](lesson08.md)
</details>

<details>
  <summary>–ë–ª–æ–∫ 3 ‚Äî Python Advanced (9‚Äì14)</summary>

  - [–õ–µ–∫—Ü–∏—è 9. –í–≤–µ–¥–µ–Ω–∏–µ –≤ –û–û–ü. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–¥–∏–≥–º—ã –û–û–ü. –ö–ª–∞—Å—Å—ã –∏ –æ–±—ä–µ–∫—Ç—ã. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ.](lesson09.md)
  - [–õ–µ–∫—Ü–∏—è 10. Magic methods. –ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã.](lesson10.md)
  - [–õ–µ–∫—Ü–∏—è 11. Imports. Standard library. PEP 8](lesson11.md)
  - [–õ–µ–∫—Ü–∏—è 12. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –∫–ª–∞—Å—Å–æ–≤ (staticmethod, classmethod, property)](lesson12.md)
  - [–õ–µ–∫—Ü–∏—è 13. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](lesson13.md)
  - [–õ–µ–∫—Ü–∏—è 14. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –ü–∞—Ç—Ç–µ—Ä–Ω—ã. SOLID.](lesson14.md)
</details>

<details>
  <summary>–ë–ª–æ–∫ 4 ‚Äî SQL (15‚Äì17)</summary>

  - [–õ–µ–∫—Ü–∏—è 15. –°–£–ë–î. PostgreSQL. SQL. DDL. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏. DCL. DML. –°–≤—è–∑–∏.](lesson15.md)
  - [–õ–µ–∫—Ü–∏—è 16. –°–£–ë–î. DQL. SELECT. –ò–Ω–¥–µ–∫—Å—ã. Group by. Joins.](lesson16.md)
  - [–õ–µ–∫—Ü–∏—è 17. –°–£–ë–î. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è. –ê–Ω–æ–º–∞–ª–∏–∏. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. ACID. TCL. Backup](lesson17.md)
</details>

- [–õ–µ–∫—Ü–∏—è 18. Virtual env. Pip. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã–µ –º–æ–¥—É–ª–∏. Pyenv.](lesson18.md)

<details open>
  <summary>–ë–ª–æ–∫ 5 ‚Äî Django (19‚Äì26)</summary>

  - [–õ–µ–∫—Ü–∏—è 19. –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å Django](lesson19.md)
  - [–õ–µ–∫—Ü–∏—è 20. Templates. Static](lesson20.md)
  - [–õ–µ–∫—Ü–∏—è 21. –ú–æ–¥–µ–ª–∏. –°–≤—è–∑–∏. Meta. Abstract, proxy](lesson21.md)
  - [–õ–µ–∫—Ü–∏—è 22. Django ORM](lesson22.md)
  - [–õ–µ–∫—Ü–∏—è 23. Forms, ModelForms. User, Authentication](lesson23.md)
  - [–õ–µ–∫—Ü–∏—è 24. ClassBaseView](lesson24.md)
  - [–õ–µ–∫—Ü–∏—è 25. NoSQL. –ö—É–∫–∏, —Å–µ—Å—Å–∏–∏, –∫–µ—à](lesson25.md)
  - ‚ñ∂ **–õ–µ–∫—Ü–∏—è 26. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ. Middleware. Signals. Background Tasks. Messages. Manage commands**
</details>

<details>
  <summary>–ë–ª–æ–∫ 6 ‚Äî Django Rest Framework (27‚Äì30)</summary>

  - [–õ–µ–∫—Ü–∏—è 27. –ß—Ç–æ —Ç–∞–∫–æ–µ API. REST –∏ RESTful. Django REST Framework.](lesson27.md)
  - [–õ–µ–∫—Ü–∏—è 28. @api_view, APIView, ViewSets, Pagination, Routers](lesson28.md)
  - [–õ–µ–∫—Ü–∏—è 29. REST-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è. Permissions. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è.](lesson29.md)
  - [–õ–µ–∫—Ü–∏—è 30. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. Django, REST API.](lesson30.md)
</details>

<details>
  <summary>–ë–ª–æ–∫ 7 ‚Äî Python async (31‚Äì33)</summary>

  - [–õ–µ–∫—Ü–∏—è 31. Celery. Multithreading. GIL. Multiprocessing](lesson31.md)
  - [–õ–µ–∫—Ü–∏—è 32. Asyncio. Aiohttp. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ.](lesson32.md)
  - [–õ–µ–∫—Ü–∏—è 33. –°–æ–∫–µ—Ç—ã. Django Channels.](lesson33.md)
</details>

<details>
  <summary>–ë–ª–æ–∫ 8 ‚Äî Deployment (34‚Äì35)</summary>

  - [–õ–µ–∫—Ü–∏—è 34. Linux. –í—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –¥–ª—è –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∞.](lesson34.md)
  - [–õ–µ–∫—Ü–∏—è 35. Deployment](lesson35.md)
</details>

- [–õ–µ–∫—Ü–∏—è 36. –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. CI/CD. –ú–æ–Ω–æ–ª–∏—Ç –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã. Docker](lesson36.md)

## –í–≤–µ–¥–µ–Ω–∏–µ

–í Django –ø–æ–º–∏–º–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –≤–∞–∂–Ω–æ —É–º–µ—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–ø—Ä–æ—Å–∞. –í —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã –Ω–∞—á–Ω—ë–º —Å
**–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** (–Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å), –∑–∞—Ç–µ–º –ø–µ—Ä–µ–π–¥—ë–º –∫ **middleware** (—Å–∫–≤–æ–∑–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ request/response), **signals**
(—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤), **background tasks** (—Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏), **messages** (flash‚Äë—Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è UI) –∏ –∫—Ä–∞—Ç–∫–æ –∑–∞—Ç—Ä–æ–Ω–µ–º **manage‚Äë–∫–æ–º–∞–Ω–¥—ã**.

–ö—É–¥–∞ —á—Ç–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∫—Ä–∞—Ç–∫–æ:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å, –æ—Ç–ª–∞–¥–∫–∞, –∞—É–¥–∏—Ç. –ò—Å–ø–æ–ª—å–∑—É–µ–º logging + –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é LOGGING.
- Middleware ‚Äî –±—ã—Å—Ç—Ä—ã–µ –∏ stateless —Å–∫–≤–æ–∑–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏; —Ç—è–∂—ë–ª—É—é –ª–æ–≥–∏–∫—É –Ω–µ —Ä–∞–∑–º–µ—â–∞–µ–º.
- Signals ‚Äî —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –º–æ–¥–µ–ª–∏/—Å–∏—Å—Ç–µ–º—ã; —Ç—è–∂—ë–ª—ã–µ –∑–∞–¥–∞—á–∏ –≤—ã–Ω–æ—Å–∏–º –≤ –æ—á–µ—Ä–µ–¥–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º dispatch_uid.
- Background Tasks (Django 6.0+) ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á; —Å–∏–≥–Ω–∞–ª —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á—É, –≤–æ—Ä–∫–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç.
- Messages ‚Äî –¥—Ä—É–∂–µ–ª—é–±–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –º–µ–∂–¥—É –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏.
- Manage‚Äë–∫–æ–º–∞–Ω–¥—ã –∏ data migrations ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—É–ø–æ–º—è–Ω–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π `RunPython.noop`).

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Django

üìö [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.djangoproject.com/en/stable/topics/logging/)

### –ß—Ç–æ —ç—Ç–æ?

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø–∏—Å–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í Django –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å Python `logging`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞—Ä—å `LOGGING` –≤ settings.py.

### –ó–∞—á–µ–º –Ω—É–∂–Ω–æ?

- –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `settings.py`:

```python
LOGGING = {
    "version": 1,
    "disable_existing_loggers": False,
    "formatters": {
        "verbose": {
            "format": "{levelname} {asctime} {module} {process:d} {thread:d} {message}",
            "style": "{",
        },
        "simple": {
            "format": "{levelname} {message}",
            "style": "{",
        },
    },
    "handlers": {
        "console": {
            "class": "logging.StreamHandler",
            "formatter": "simple",
        },
        "file": {
            "class": "logging.FileHandler",
            "filename": "django.log",
            "formatter": "verbose",
        },
    },
    "root": {
        "handlers": ["console"],
        "level": "INFO",
    },
    "loggers": {
        "django": {
            "handlers": ["console", "file"],
            "level": "INFO",
            "propagate": False,
        },
        "myapp": {  # –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∏–º—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            "handlers": ["console", "file"],
            "level": "DEBUG",
            "propagate": False,
        },
    },
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```python
import logging

logger = logging.getLogger(__name__)

def my_view(request):
    logger.debug("–ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞")
    logger.info("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å %s –≤—ã–ø–æ–ª–Ω–∏–ª –¥–µ–π—Å—Ç–≤–∏–µ", request.user.username)

    try:
        # –≤–∞—à –∫–æ–¥
        result = some_operation()
        logger.info("–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")
        return result
    except Exception as e:
        logger.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏: %s", e, exc_info=True)
        raise
```

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

| –£—Ä–æ–≤–µ–Ω—å    | –ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                          |
|------------|-------------------|---------------------------------------------|
| `DEBUG`    | 10                | –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏            |
| `INFO`     | 20                | –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–µ                   |
| `WARNING`  | 30                | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö    |
| `ERROR`    | 40                | –û—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —Ä–∞–±–æ—Ç—É     |
| `CRITICAL` | 50                | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å |

---

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤

–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ N+1 –ø—Ä–æ–±–ª–µ–º –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

```python
# settings.py (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!)
LOGGING = {
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ...
    "loggers": {
        "django.db.backends": {
            "handlers": ["console"],
            "level": "DEBUG",  # –ü–æ–∫–∞–∂–µ—Ç –≤—Å–µ SQL-–∑–∞–ø—Ä–æ—Å—ã
            "propagate": False,
        },
    },
}
```

---

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (JSON)

–î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è JSON-—Ñ–æ—Ä–º–∞—Ç ‚Äî –µ–≥–æ –ª–µ–≥–∫–æ –ø–∞—Ä—Å–∏—Ç—å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```python
# settings.py
LOGGING = {
    "version": 1,
    "disable_existing_loggers": False,
    "formatters": {
        "json": {
            "()": "pythonjsonlogger.jsonlogger.JsonFormatter",
            "format": "%(asctime)s %(levelname)s %(name)s %(message)s",
        },
    },
    "handlers": {
        "console": {
            "class": "logging.StreamHandler",
            "formatter": "json",
        },
    },
    "root": {
        "handlers": ["console"],
        "level": "INFO",
    },
}
```

–£—Å—Ç–∞–Ω–æ–≤–∫–∞: `pip install python-json-logger`

–í—ã–≤–æ–¥ –±—É–¥–µ—Ç —Ç–∞–∫–∏–º:
```json
{"asctime": "2025-01-15 10:30:00", "levelname": "INFO", "name": "myapp.views", "message": "User logged in", "user_id": 123}
```

---

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Production

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sentry

[Sentry](https://sentry.io/) ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫:

```python
# settings.py
import sentry_sdk
from sentry_sdk.integrations.django import DjangoIntegration

sentry_sdk.init(
    dsn="https://your-dsn@sentry.io/project",
    integrations=[DjangoIntegration()],
    traces_sample_rate=0.1,  # 10% –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è performance monitoring
    send_default_pii=True,
)
```

#### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (ELK Stack)

–î–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –≤ Elasticsearch:

```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí Filebeat ‚Üí Logstash ‚Üí Elasticsearch ‚Üí Kibana
     ‚Üì
  JSON-–ª–æ–≥–∏ –≤ —Ñ–∞–π–ª –∏–ª–∏ stdout
```

> üí° **–°–æ–≤–µ—Ç:** –í Docker/Kubernetes –ª–æ–≥–∏—Ä—É–π—Ç–µ –≤ stdout ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∞–º —Å–æ–±–µ—Ä—ë—Ç –ª–æ–≥–∏.

---

### –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫ –ª–æ–≥–∞–º –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –æ—Ç–ª–∞–¥–∫–∏:

```python
import logging

logger = logging.getLogger(__name__)

def process_order(request, order_id):
    # –°–æ–∑–¥–∞—ë–º –∞–¥–∞–ø—Ç–µ—Ä —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
    extra = {
        "user_id": request.user.id,
        "order_id": order_id,
        "ip": request.META.get("REMOTE_ADDR"),
    }

    logger.info("Processing order", extra=extra)

    try:
        order = Order.objects.get(pk=order_id)
        # ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
        logger.info("Order processed successfully", extra=extra)
    except Order.DoesNotExist:
        logger.warning("Order not found", extra=extra)
    except Exception as e:
        logger.exception("Failed to process order", extra=extra)
        raise
```

---

## üß© Middleware

![](https://memegenerator.net/img/instances/81631865.jpg)

üìö [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.djangoproject.com/en/stable/topics/http/middleware/)

### –ß—Ç–æ —ç—Ç–æ?

–ú—ã —Å –≤–∞–º–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã —Ç–æ–≥–æ, –∫–∞–∫–∏–µ —ç—Ç–∞–ø—ã –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ request –Ω–∞ –≤—Å—ë–º –ø—É—Ç–∏ –Ω–∞—à–µ–π request-response
—Å–∏—Å—Ç–µ–º—ã,
–Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –∫–∞–∂–¥—ã–π request –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫—É—á—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫, —Ç–∞–∫–∏—Ö –∫–∞–∫ middleware, –ø—Ä–∏—á—ë–º –∫–∞–∂–¥—ã–π request
–¥–µ–ª–∞–µ—Ç —ç—Ç–æ –¥–≤–∞–∂–¥—ã, –ø—Ä–∏ ¬´–≤—Ö–æ–¥–µ¬ª –∏ –ø—Ä–∏ ¬´–≤—ã—Ö–æ–¥–µ¬ª.

**Middleware** ‚Äî —ç—Ç–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤. –ö–∞–∂–¥—ã–π HTTP-–∑–∞–ø—Ä–æ—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É middleware
¬´–≤–ø–µ—Ä—ë–¥¬ª –∫ view –∏ ¬´–æ–±—Ä–∞—Ç–Ω–æ¬ª ‚Äî –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Å–ª–æ—ë–Ω—ã–π –ø–∏—Ä–æ–≥: –∫–∞–∂–¥—ã–π —Å–ª–æ–π –º–æ–∂–µ—Ç —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å —Å –∑–∞–ø—Ä–æ—Å–æ–º
–∏–ª–∏ –æ—Ç–≤–µ—Ç–æ–º.

```plaintext
Request ‚Üì
 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
 ‚îÇ SecurityMiddleware                                      ‚îÇ
 ‚îÇ SessionMiddleware                                       ‚îÇ
 ‚îÇ CommonMiddleware                                        ‚îÇ
 ‚îÇ CsrfViewMiddleware                                      ‚îÇ
 ‚îÇ AuthenticationMiddleware                                ‚îÇ
 ‚îÇ YOUR CUSTOM MIDDLEWARE                                  ‚îÇ
 ‚îÇ MessageMiddleware                                       ‚îÇ
 ‚îÇ Clickjacking Protection (XFrameOptionsMiddleware)       ‚îÇ
 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    View ‚Üí
         ‚Üê Response (—Ç–æ—Ç –∂–µ –ø—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ)
```

---

### –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ `settings.py`

```python
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'main.middleware.CheckUserStatus',  # –≤–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]
```

---

### –ö–∞–∫ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π middleware?

#### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 1: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π

```python
import logging
logger = logging.getLogger(__name__)

def simple_middleware(get_response):
    def middleware(request):
        logger.debug("Before view")
        response = get_response(request)
        logger.debug("After view")
        return response

    return middleware
```

#### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 2: –ö–ª–∞—Å—Å–æ–≤—ã–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```python
import logging
from django.http import HttpResponse
logger = logging.getLogger(__name__)

class SimpleMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        logger.debug("Before view")
        # –ü—Ä–∏–º–µ—Ä –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –∑–∞–º—ã–∫–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞:
        # if some_condition(request):
        #     return HttpResponse("Blocked", status=403)
        response = self.get_response(request)
        logger.debug("After view")
        return response
```

–î–æ–±–∞–≤—å—Ç–µ middleware –≤ `settings.py`.

---

### üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã middleware

#### 1. Request Timing (–∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—Ä–æ—Å–∞)

```python
import time
import logging

logger = logging.getLogger(__name__)


class RequestTimingMiddleware:
    """–õ–æ–≥–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞."""

    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        start_time = time.perf_counter()

        response = self.get_response(request)

        duration = time.perf_counter() - start_time
        logger.info(
            "Request %s %s completed in %.3fs",
            request.method,
            request.path,
            duration,
        )

        # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ –æ—Ç–≤–µ—Ç
        response["X-Request-Duration"] = f"{duration:.3f}s"
        return response
```

#### 2. Request ID (–¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤)

```python
import uuid


class RequestIDMiddleware:
    """–î–æ–±–∞–≤–ª—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫ –∫–∞–∂–¥–æ–º—É –∑–∞–ø—Ä–æ—Å—É –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏."""

    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        # –ë–µ—Ä—ë–º ID –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π
        request_id = request.headers.get("X-Request-ID") or str(uuid.uuid4())
        request.request_id = request_id

        response = self.get_response(request)

        response["X-Request-ID"] = request_id
        return response
```

#### 3. IP Blocking (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ IP)

```python
from django.http import HttpResponseForbidden
from django.conf import settings


class IPBlockMiddleware:
    """–ë–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö IP-–∞–¥—Ä–µ—Å–æ–≤."""

    def __init__(self, get_response):
        self.get_response = get_response
        self.blocked_ips = getattr(settings, "BLOCKED_IPS", [])

    def __call__(self, request):
        ip = self.get_client_ip(request)

        if ip in self.blocked_ips:
            return HttpResponseForbidden("Access denied")

        return self.get_response(request)

    def get_client_ip(self, request):
        x_forwarded_for = request.META.get("HTTP_X_FORWARDED_FOR")
        if x_forwarded_for:
            return x_forwarded_for.split(",")[0].strip()
        return request.META.get("REMOTE_ADDR")
```

---

### ü™ù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ö—É–∫–∏ middleware

–ü–æ–º–∏–º–æ `__call__`, middleware –º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```python
class AdvancedMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        response = self.get_response(request)
        return response

    def process_view(self, request, view_func, view_args, view_kwargs):
        """
        –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–ï–†–ï–î –≤—ã–∑–æ–≤–æ–º view, –Ω–æ –ü–û–°–õ–ï URL routing.
        –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–æ–π view –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω.

        Return None ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
        Return HttpResponse ‚Äî –ø—Ä–µ—Ä–≤–∞—Ç—å –∏ –≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç
        """
        # –ü—Ä–∏–º–µ—Ä: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑—ã–≤–∞–µ–º–æ–≥–æ view
        logger.debug(f"Calling view: {view_func.__name__}")
        return None

    def process_exception(self, request, exception):
        """
        –í—ã–∑—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ view –≤—ã–±—Ä–æ—Å–∏–ª –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

        Return None ‚Äî –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ
        Return HttpResponse ‚Äî –≤–µ—Ä–Ω—É—Ç—å —ç—Ç–æ—Ç –æ—Ç–≤–µ—Ç –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏
        """
        logger.exception(f"Exception in view: {exception}")
        # –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—à–∏–±–∫–∏
        return None

    def process_template_response(self, request, response):
        """
        –í—ã–∑—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ response –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥ render() (TemplateResponse).
        –ü–æ–∑–≤–æ–ª—è–µ—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —à–∞–±–ª–æ–Ω–∞.
        """
        if hasattr(response, "context_data"):
            response.context_data["middleware_data"] = "injected"
        return response
```

#### –ü–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–∞ —Ö—É–∫–æ–≤

```plaintext
Request ‚Üì
  1. Middleware1.__call__ (before get_response)
  2. Middleware2.__call__ (before get_response)
  3. process_view (–≤—Å–µ middleware, —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑)
  4. View –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
  5. process_exception (–µ—Å–ª–∏ –±—ã–ª–∞ –æ—à–∏–±–∫–∞, —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö)
  6. process_template_response (–µ—Å–ª–∏ TemplateResponse, —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö)
  7. Middleware2.__call__ (after get_response)
  8. Middleware1.__call__ (after get_response)
Response ‚Üë
```

---

### üí° –°–æ–≤–µ—Ç

–ü–æ—Ä—è–¥–æ–∫ **–∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ**! –ï—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–∏–ª–∏ middleware, —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å `request.user`, –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–ø–æ—Å–ª–µ**
`AuthenticationMiddleware`.

---

### üîß MiddlewareMixin

–î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ API:

```python
from django.utils.deprecation import MiddlewareMixin


class MyMiddleware(MiddlewareMixin):
    def process_request(self, request):
        ...

    def process_response(self, request, response):
        ...
```

> ‚ö†Ô∏è `MiddlewareMixin` ‚Äî —ç—Ç–æ legacy-–ø–æ–¥—Ö–æ–¥. –î–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞—Å—Å–æ–≤—ã–π middleware —Å `__call__`.

---

## üì° Signals (–°–∏–≥–Ω–∞–ª—ã)

üìö [Signals](https://docs.djangoproject.com/en/stable/topics/signals/)

### –ß—Ç–æ —ç—Ç–æ?

–°–∏–≥–Ω–∞–ª—ã ‚Äî —Å–ø–æ—Å–æ–± —É–≤–µ–¥–æ–º–∏—Ç—å —á–∞—Å—Ç–∏ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ ¬´—á—Ç–æ-—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ¬ª, ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞. –≠—Ç–æ
–ø–æ–º–æ–≥–∞–µ—Ç **—Ä–∞–∑–¥–µ–ª–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å** –∏ **–Ω–µ –ø–∏—Å–∞—Ç—å –ª–æ–≥–∏–∫—É –≤ –º–æ–¥–µ–ª—è—Ö –∏–ª–∏ view –Ω–∞–ø—Ä—è–º—É—é**.

---

### –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–∏–≥–Ω–∞–ª—ã:

| –°–∏–≥–Ω–∞–ª                                 | –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è            |
|----------------------------------------|-----------------------------|
| `pre_save` / `post_save`               | –î–æ/–ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ |
| `pre_delete` / `post_delete`           | –î–æ/–ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞   |
| `m2m_changed`                          | –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ ManyToMany      |
| `request_started` / `request_finished` | –ù–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü –∑–∞–ø—Ä–æ—Å–∞        |
| `pre_migrate` / `post_migrate`         | –î–æ/–ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–π           |
| `user_logged_in` / `user_logged_out`   | –í—Ö–æ–¥/–≤—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è     |

---

### ü§î –°–∏–≥–Ω–∞–ª—ã vs –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ save()

–ö–æ–≥–¥–∞ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

| –ö—Ä–∏—Ç–µ—Ä–∏–π                           | –°–∏–≥–Ω–∞–ª—ã                      | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `save()`      |
|------------------------------------|------------------------------|-------------------------------|
| –õ–æ–≥–∏–∫–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –º–æ–¥–µ–ª—å—é –Ω–∞–ø—Ä—è–º—É—é  | ‚ùå                            | ‚úÖ –õ—É—á—à–∏–π –≤—ã–±–æ—Ä                |
| –õ–æ–≥–∏–∫–∞ –≤ –¥—Ä—É–≥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏         | ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ | ‚ùå –°–æ–∑–¥–∞—ë—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å         |
| –ù—É–∂–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ bulk-–æ–ø–µ—Ä–∞—Ü–∏–∏ | ‚ùå –°–∏–≥–Ω–∞–ª—ã –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è      | ‚ùå `save()` —Ç–æ–∂–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è |
| –û—Ç–ª–∞–¥–∫–∞ –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å               | ‚ùå –°–∫—Ä—ã—Ç–∞—è –ª–æ–≥–∏–∫–∞             | ‚úÖ –Ø–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞                |
| –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è               | ‚úÖ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±        | ‚ùå –ù–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å             |
| –ê—É–¥–∏—Ç/–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ                  | ‚úÖ –•–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä              | ‚ö†Ô∏è –ú–æ–∂–Ω–æ, –Ω–æ –∑–∞—Å–æ—Ä—è–µ—Ç –º–æ–¥–µ–ª—å  |

**–ü—Ä–∞–≤–∏–ª–æ:** –ï—Å–ª–∏ –ª–æ–≥–∏–∫–∞ ‚Äî —á–∞—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –º–æ–¥–µ–ª–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `save()`. –ï—Å–ª–∏ —ç—Ç–æ –ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∞—É–¥–∏—Ç, –∫–µ—à) ‚Äî —Å–∏–≥–Ω–∞–ª—ã.

---

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º

```python
from django.db.models.signals import post_save
from django.dispatch import receiver
from myapp.models import Order


@receiver(post_save, sender=Order)
def after_order_save(sender, instance, created, **kwargs):
    if created:
        send_email_to_manager(instance)
```

> –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥–≤–æ–π–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–∞—Ö/–∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `dispatch_uid`.

```python
@receiver(post_save, sender=Order, dispatch_uid="order_post_save_once")
def after_order_save(sender, instance, created, **kwargs):
    ...
```

- –¢—è–∂—ë–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Å–∏–≥–Ω–∞–ª–µ (–æ—Ç–ø—Ä–∞–≤–∫–∞ email, –≤–Ω–µ—à–Ω–∏–µ API) –ª—É—á—à–µ –≤—ã–Ω–æ—Å–∏—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á (Celery/RQ) ‚Äî —Å–∏–≥–Ω–∞–ª —Ç–æ–ª—å–∫–æ —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á—É.
- –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Django –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è `providing_args` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä —É–¥–∞–ª—ë–Ω.

---

### –ü—Ä–∏–º–µ—Ä: m2m_changed

–°–∏–≥–Ω–∞–ª `m2m_changed` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ ManyToMany —Å–≤—è–∑–µ–π:

```python
from django.db.models.signals import m2m_changed
from django.dispatch import receiver
from myapp.models import Article


@receiver(m2m_changed, sender=Article.tags.through)
def tags_changed(sender, instance, action, pk_set, **kwargs):
    """
    –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–≥–æ–≤ —Å—Ç–∞—Ç—å–∏.

    action –º–æ–∂–µ—Ç –±—ã—Ç—å:
    - "pre_add" / "post_add" ‚Äî –ø–µ—Ä–µ–¥/–ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
    - "pre_remove" / "post_remove" ‚Äî –ø–µ—Ä–µ–¥/–ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
    - "pre_clear" / "post_clear" ‚Äî –ø–µ—Ä–µ–¥/–ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö —Å–≤—è–∑–µ–π
    """
    if action == "post_add":
        # pk_set ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–æ ID –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç–µ–≥–æ–≤
        print(f"Added tags {pk_set} to article {instance.title}")

        # –ü—Ä–∏–º–µ—Ä: –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞
        cache.delete(f"article_{instance.id}_tags")

    elif action == "post_remove":
        print(f"Removed tags {pk_set} from article {instance.title}")

    elif action == "post_clear":
        print(f"Cleared all tags from article {instance.title}")
```

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** `sender` ‚Äî —ç—Ç–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ (`Article.tags.through`), –∞ –Ω–µ —Å–∞–º–∞ –º–æ–¥–µ–ª—å!

---

### –†—É—á–Ω–æ–π —Å–∏–≥–Ω–∞–ª

```python
from django.dispatch import Signal

pizza_done = Signal()

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–≥–Ω–∞–ª–∞
pizza_done.send(sender=None, toppings=["pepperoni"], size="large")

# –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–∏–≥–Ω–∞–ª
@receiver(pizza_done)
def on_pizza_done(sender, toppings, size, **kwargs):
    print(f"Pizza {size} with {toppings} is ready!")
```

---

### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- **–°–∫—Ä—ã—Ç–∞—è –ª–æ–≥–∏–∫–∞**: —Å–∏–≥–Ω–∞–ª—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è ¬´–≤ —Ñ–æ–Ω–µ¬ª, —É—Å–ª–æ–∂–Ω—è—è –æ—Ç–ª–∞–¥–∫—É.
- **–ù–µ—è–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: —Å–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, –∫—Ç–æ —Å–ª—É—à–∞–µ—Ç —Å–∏–≥–Ω–∞–ª.
- **–û—à–∏–±–∫–∏ –≤ —Å–∏–≥–Ω–∞–ª–∞—Ö ‚Üí –ø–∞–¥–∞–µ—Ç –≤—Å—ë** (–µ—Å–ª–∏ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ).
- **–ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å bulk-–æ–ø–µ—Ä–∞—Ü–∏—è–º–∏**: `QuerySet.update()`, `bulk_create()` –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç —Å–∏–≥–Ω–∞–ª—ã.

```python
# ‚ùå –°–∏–≥–Ω–∞–ª post_save –ù–ï –≤—ã–∑–æ–≤–µ—Ç—Å—è!
Order.objects.filter(status="pending").update(status="completed")

# ‚úÖ –°–∏–≥–Ω–∞–ª –≤—ã–∑–æ–≤–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
for order in Order.objects.filter(status="pending"):
    order.status = "completed"
    order.save()
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –∏ –≤—ã–±–æ—Ä–æ—á–Ω–æ**, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

---

### üìÅ –ì–¥–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã?

–û–±—ã—á–Ω–æ —Å–∏–≥–Ω–∞–ª—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ `signals.py` –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∞ –∑–∞—Ç–µ–º –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –≤
`apps.py`.

#### –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

```
myapp/
‚îú‚îÄ‚îÄ apps.py
‚îú‚îÄ‚îÄ models.py
‚îú‚îÄ‚îÄ signals.py
```

#### signals.py:

```python
from django.db.models.signals import post_save
from django.dispatch import receiver
from .models import Order


@receiver(post_save, sender=Order)
def notify_manager(sender, instance, created, **kwargs):
    if created:
        print(f"New order created: {instance.id}")
```

#### apps.py:

```python
from django.apps import AppConfig


class MyAppConfig(AppConfig):
    name = 'myapp'

    def ready(self):
        import myapp.signals
```

üìå –ú–µ—Ç–æ–¥ `ready()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ Django, –∏ –∏–º–µ–Ω–Ω–æ —Ç–∞–º —Å–ª–µ–¥—É–µ—Ç **–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å** –º–æ–¥—É–ª—å —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏, —á—Ç–æ–±—ã –æ–Ω–∏
–±—ã–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –ù–µ –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ —Å–∏–≥–Ω–∞–ª—ã –≤ `models.py` –∏–ª–∏ `__init__.py` ‚Äî —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Å
–∏–º–ø–æ—Ä—Ç–∞–º–∏.

---

### ‚ÑπÔ∏è –ß—Ç–æ —Ç–∞–∫–æ–µ `apps.py`?

–§–∞–π–ª `apps.py` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å-–Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Django –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

#### –ü—Ä–∏–º–µ—Ä –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```python
from django.apps import AppConfig


class BlogConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'blog'
```

### –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≤ `apps.py`?

- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã
- –í—ã–ø–æ–ª–Ω—è—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ª–æ–≥–≥–µ—Ä—ã
- –°–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –∏–ª–∏ cron-—Ö—É–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Celery beat)

üìå –¢–æ–ª—å–∫–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ `ready()` —Ç—è–∂—ë–ª—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ ‚Äî –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ **–∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ** –ø—Ä–æ—Ü–µ—Å—Å–∞ Django.

---

## üöÄ Background Tasks (Django 6.0+)

üìö [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.djangoproject.com/en/6.0/topics/tasks/)

### –ß—Ç–æ —ç—Ç–æ?

**Background Tasks** ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ Django –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ **–≤–Ω–µ —Ü–∏–∫–ª–∞ request-response**. –ü–æ—è–≤–∏–ª—Å—è –≤ Django 6.0 (–¥–µ–∫–∞–±—Ä—å 2025).

–†–∞–Ω—å—à–µ –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á —Ç—Ä–µ–±–æ–≤–∞–ª–∏—Å—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è (Celery, RQ, Dramatiq). –¢–µ–ø–µ—Ä—å Django –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–µ–¥–∏–Ω—ã–π API** –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥—å, –∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å—Ç–∞—ë—Ç—Å—è –∑–∞ –≤–Ω–µ—à–Ω–∏–º–∏ –≤–æ—Ä–∫–µ—Ä–∞–º–∏.

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

- –û—Ç–ø—Ä–∞–≤–∫–∞ email (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (—Ä–µ—Å–∞–π–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è)
- –í—ã–∑–æ–≤—ã –≤–Ω–µ—à–Ω–∏—Ö API (–ø–ª–∞—Ç—ë–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
- –õ—é–±—ã–µ ¬´—Ç—è–∂—ë–ª—ã–µ¬ª –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ —Å–∏–≥–Ω–∞–ª–æ–≤

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

–ó–∞–¥–∞—á–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º `@task`:

```python
# myapp/tasks.py
from django.core.mail import send_mail
from django.tasks import task


@task
def send_welcome_email(user_email, username):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–∏—Å—å–º–∞ –Ω–æ–≤–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é."""
    return send_mail(
        subject="–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!",
        message=f"–ü—Ä–∏–≤–µ—Ç, {username}! –†–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å.",
        from_email=None,  # –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DEFAULT_FROM_EMAIL
        recipient_list=[user_email],
    )


@task(priority=10, queue_name="reports")
def generate_monthly_report(user_id, month, year):
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞ —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º."""
    # ... —Ç—è–∂—ë–ª–∞—è –ª–æ–≥–∏–∫–∞
    return {"status": "completed", "rows": 1500}
```

### –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥—å

```python
from myapp.tasks import send_welcome_email

# –í view –∏–ª–∏ —Å–∏–≥–Ω–∞–ª–µ
def register_user(request):
    user = User.objects.create(...)

    # –°—Ç–∞–≤–∏–º –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å ‚Äî –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
    result = send_welcome_email.enqueue(
        user_email=user.email,
        username=user.username,
    )

    # result ‚Äî —ç—Ç–æ TaskResult —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º id
    print(f"Task ID: {result.id}")

    return redirect("profile")
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ backends

Backends –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `settings.py` —á–µ—Ä–µ–∑ `TASKS`:

```python
# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ —Å—Ä–∞–∑—É (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
TASKS = {
    "default": {
        "BACKEND": "django.tasks.backends.immediate.ImmediateBackend",
    }
}

# –î–ª—è —Ç–µ—Å—Ç–æ–≤ ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
TASKS = {
    "default": {
        "BACKEND": "django.tasks.backends.dummy.DummyBackend",
    }
}
```

#### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ backends:

| Backend            | –û–ø–∏—Å–∞–Ω–∏–µ                          | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|--------------------|-----------------------------------|---------------|
| `ImmediateBackend` | –í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ —Å—Ä–∞–∑—É, —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞    |
| `DummyBackend`     | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è   | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ  |

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –î–ª—è production –Ω—É–∂–µ–Ω —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π backend —Å —Ä–µ–∞–ª—å–Ω—ã–º –≤–æ—Ä–∫–µ—Ä–æ–º (—Å–º. [Community Ecosystem](https://docs.djangoproject.com/en/6.0/topics/tasks/)).

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏

–¢–∏–ø–∏—á–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω ‚Äî —Å–∏–≥–Ω–∞–ª —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å:

```python
# myapp/signals.py
from django.db.models.signals import post_save
from django.dispatch import receiver
from .models import Order
from .tasks import notify_manager, process_order


@receiver(post_save, sender=Order, dispatch_uid="order_created")
def on_order_created(sender, instance, created, **kwargs):
    if created:
        # –õ—ë–≥–∫–∞—è –∑–∞–¥–∞—á–∞ ‚Äî –º–æ–∂–Ω–æ –≤ —Å–∏–≥–Ω–∞–ª–µ
        notify_manager.enqueue(order_id=instance.id)

        # –¢—è–∂—ë–ª–∞—è –∑–∞–¥–∞—á–∞ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å
        process_order.enqueue(order_id=instance.id)
```

### –†–∞–±–æ—Ç–∞ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤–∞–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É **–ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞**, –∏–Ω–∞—á–µ –≤–æ—Ä–∫–µ—Ä –º–æ–∂–µ—Ç –Ω–µ –Ω–∞–π—Ç–∏ –æ–±—ä–µ–∫—Ç –≤ –ë–î:

```python
from functools import partial
from django.db import transaction


def create_order(request):
    with transaction.atomic():
        order = Order.objects.create(...)

        # ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –∑–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –¥–æ –∫–æ–º–º–∏—Ç–∞
        # process_order.enqueue(order_id=order.id)

        # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –∑–∞–¥–∞—á–∞ —Å—Ç–∞–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞
        transaction.on_commit(
            partial(process_order.enqueue, order_id=order.id)
        )

    return redirect("orders")
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```python
from django.tasks import default_task_backend

# –ü—Ä–∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–¥–∞—á–∏
result = send_welcome_email.enqueue(user_email="user@example.com", username="John")
task_id = result.id  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

# –ü–æ–∑–∂–µ ‚Äî –ø–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
result = send_welcome_email.get_result(task_id)
# –∏–ª–∏ —á–µ—Ä–µ–∑ backend
result = default_task_backend.get_result(task_id)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
print(result.status)  # RUNNING, SUCCESSFUL, FAILED

# –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
result.refresh()

# –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ (–µ—Å–ª–∏ SUCCESSFUL)
if result.status == "SUCCESSFUL":
    print(result.return_value)

# –ü–æ–ª—É—á–∞–µ–º –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ FAILED)
if result.status == "FAILED":
    for error in result.errors:
        print(error.exception_class)
        print(error.traceback)
```

### Task Context

–ó–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç:

```python
import logging
from django.tasks import task

logger = logging.getLogger(__name__)


@task(takes_context=True)
def retry_aware_task(context, data):
    """–ó–∞–¥–∞—á–∞, –∫–æ—Ç–æ—Ä–∞—è –∑–Ω–∞–µ—Ç –æ –ø–æ–ø—ã—Ç–∫–∞—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è."""
    logger.info(
        f"–ü–æ–ø—ã—Ç–∫–∞ {context.attempt}, Task ID: {context.task_result.id}"
    )
    # ... –ª–æ–≥–∏–∫–∞
```

### ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **JSON-—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å JSON-—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã–º–∏
   ```python
   # ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
   my_task.enqueue(datetime.now())  # datetime –Ω–µ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è
   my_task.enqueue(user)  # Model instance –Ω–µ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è

   # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
   my_task.enqueue(user_id=user.id)  # –ü–µ—Ä–µ–¥–∞—ë–º ID
   my_task.enqueue(timestamp=datetime.now().isoformat())  # –°—Ç—Ä–æ–∫–∞
   ```

2. **Django –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–æ—Ä–∫–µ—Ä—ã**: –§—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏ —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á–∏. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Äî –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

3. **Round-trip —Ç–∏–ø–æ–≤**: –ü–æ—Å–ª–µ JSON-—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∏–ø—ã –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è
   ```python
   # tuple ‚Üí list –ø–æ—Å–ª–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   my_task.enqueue(data=(1, 2, 3))  # –í –∑–∞–¥–∞—á–µ –±—É–¥–µ—Ç [1, 2, 3]
   ```

> üìå Django Tasks ‚Äî —ç—Ç–æ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API**. –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ backends –∏–∑ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã, –∏–ª–∏ Celery –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (—Å–º. –ª–µ–∫—Ü–∏—é 31).

---

## ‚úâÔ∏è Messages (Flash-—Å–æ–æ–±—â–µ–Ω–∏—è)

üìö [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.djangoproject.com/en/stable/ref/contrib/messages/)

–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–∫–∞–∑–∞—Ç—å –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–∞. –ü—Ä–∏–º–µ—Ä ‚Äî ¬´–í—ã —É—Å–ø–µ—à–Ω–æ
–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å¬ª.

---

### –í–∫–ª—é—á–µ–Ω–∏–µ

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:

- `'django.contrib.messages'` –≤ `INSTALLED_APPS`
- `'django.contrib.messages.middleware.MessageMiddleware'` –≤ `MIDDLEWARE`
- `django.contrib.messages.context_processors.messages` –≤ `TEMPLATES -> OPTIONS -> context_processors`

---

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

```python
from django.contrib import messages


def my_view(request):
    messages.success(request, "–ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª—ë–Ω!")
    return redirect("profile")
```

---

### –£—Ä–æ–≤–Ω–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

```python
messages.debug(request, "–û—Ç–ª–∞–¥–∫–∞")
messages.info(request, "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")
messages.success(request, "–£—Å–ø–µ—Ö!")
messages.warning(request, "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ")
messages.error(request, "–û—à–∏–±–∫–∞")
```

---

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —à–∞–±–ª–æ–Ω–µ

```html
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li class="{{ message.tags }}">{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
```

---

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å CBV (Class-Based Views)

```python
from django.contrib.messages.views import SuccessMessageMixin
from django.urls import reverse_lazy

class MyView(SuccessMessageMixin, CreateView):
    form_class = MyForm
    success_message = "–û–±—ä–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!"
    success_url = reverse_lazy("my-list")  # –∏–ª–∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ get_success_url()
```

> –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `FallbackStorage` (`MESSAGE_STORAGE`). –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —Å–º–µ–Ω–∏—Ç—å backend –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ `MESSAGE_STORAGE`.


---

### üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–µ–π—Å—ã

| –°—Ü–µ–Ω–∞—Ä–∏–π                    | –ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è   |
|-----------------------------|--------------------|
| –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è        | `messages.success` |
| –û—à–∏–±–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã     | `messages.error`   |
| –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –±–∞–ª–∞–Ω—Å–µ    | `messages.warning` |
| –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π info | `messages.debug`   |

---

## üß™ –ü–æ–≤—Ç–æ—Ä–∏–º –∏ –∑–∞–∫—Ä–µ–ø–∏–º

‚úÖ Middleware ‚Äî —ç—Ç–æ **–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞**, –º–æ–∂–µ—Ç –±—ã—Ç—å —Ñ—É–Ω–∫—Ü–∏–µ–π –∏–ª–∏ –∫–ª–∞—Å—Å–æ–º
‚úÖ Signals –ø–æ–∑–≤–æ–ª—è—é—Ç **—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è** –º–æ–¥–µ–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ—ë –∫–æ–¥–∞
‚úÖ Background Tasks (Django 6.0+) ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± **–≤—ã–Ω–æ—Å–∏—Ç—å —Ç—è–∂—ë–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –∏–∑ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ view
‚úÖ Messages ‚Äî —ç—Ç–æ **–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**, —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ redirect'–æ–≤
‚úÖ –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –≤–∫–ª—é—á–∞—Ç—å –Ω—É–∂–Ω—ã–µ middleware –∏ context_processors
‚úÖ Middleware —Ä–∞–±–æ—Ç–∞—é—Ç –≤ **–¥–≤—É—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö**: –∑–∞–ø—Ä–æ—Å –∏ –æ—Ç–≤–µ—Ç
‚úÖ –î–ª—è production Background Tasks —Ç—Ä–µ–±—É—é—Ç **–≤–Ω–µ—à–Ω–∏–π backend** —Å –≤–æ—Ä–∫–µ—Ä–∞–º–∏

---

## Manage-–∫–æ–º–∞–Ω–¥—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

> –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∫–æ–º–∞–Ω–¥–∞–º: https://docs.djangoproject.com/en/stable/ref/django-admin/


Manage-–∫–æ–º–∞–Ω–¥—ã –≤ —Ä–∞–º–∫–∞—Ö Django - —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö
–¥–µ–π—Å—Ç–≤–∏–π.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç—Ä–∏ —Å–ø–æ—Å–æ–±–∞ –∑–∞–ø—É—Å–∫–∞ manage-–∫–æ–º–∞–Ω–¥—ã:

```
django-admin <command> [options]
python manage.py <command> [options]
python -m django <command> [options]
```

–í —Å–ª—É—á–∞–µ –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ `django-admin` –≤—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å, –∫–∞–∫–æ–π —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –æ–ø—Ü–∏–∏ `--settings`.

–ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ `manage.py` (—Å–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±), —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏
—Å —Å–∞–º–∏–º —Ñ–∞–π–ª–æ–º `manage.py` (–ù–∞–ø–æ–º–∏–Ω–∞—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è Django –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏–º–µ–Ω–Ω–æ –≤
—Ñ–∞–π–ª–µ `manage.py`).

–ú—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã, –Ω–æ –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ.

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.

![](https://www.meme-arsenal.com/memes/d4d5ed953c6b783bc97f142cb8e89d4d.jpg)

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è                            | –ö–æ–º–∞–Ω–¥–∞            | –û–ø–∏—Å–∞–Ω–∏–µ                                             | –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è                                |
|--------------------------------------|--------------------|------------------------------------------------------|-----------------------------------------------------|
| üèó **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** | `startproject`     | –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π Django-–ø—Ä–æ–µ–∫—Ç                          | `django-admin startproject mysite`                  |
|                                      | `startapp`         | –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–µ Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ                      | `python manage.py startapp blog`                    |
| üîÑ **–ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç–∞ —Å –ë–î**        | `makemigrations`   | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ–¥–µ–ª–µ–π          | `python manage.py makemigrations users`             |
|                                      | `migrate`          | –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö                     | `python manage.py migrate`                          |
|                                      | `showmigrations`   | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å                  | `python manage.py showmigrations`                   |
|                                      | `sqlmigrate`       | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç SQL-–∫–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏               | `python manage.py sqlmigrate users 0001`            |
|                                      | `squashmigrations` | –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–≥—Ä–∞—Ü–∏–π –≤ –æ–¥–Ω—É                 | `python manage.py squashmigrations users 0001 0005` |
|                                      | `flush`            | –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã (—Å–æ—Ö—Ä–∞–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É)      | `python manage.py flush`                            |
|                                      | `sqlflush`         | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç SQL-–∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –ø—Ä–∏ flush | `python manage.py sqlflush`                         |
|                                      | `sqlsequencereset` | –°–±—Ä–æ—Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π (id)                       | `python manage.py sqlsequencereset users`           |
|                                      | `inspectdb`        | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î          | `python manage.py inspectdb > models.py`            |
| üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**                  | `test`             | –ó–∞–ø—É—Å–∫–∞–µ—Ç unit-—Ç–µ—Å—Ç—ã                                 | `python manage.py test`                             |
| üß† **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**     | `createsuperuser`  | –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                           | `python manage.py createsuperuser`                  |
|                                      | `changepassword`   | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                        | `python manage.py changepassword admin`             |
| üåê **–°–µ—Ä–≤–µ—Ä –∏ –∫–æ–Ω—Å–æ–ª—å**              | `runserver`        | –ó–∞–ø—É—Å–∫–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏                | `python manage.py runserver 8080`                   |
|                                      | `shell`            | –û—Ç–∫—Ä—ã–≤–∞–µ—Ç Django shell                               | `python manage.py shell`                            |
|                                      | `dbshell`          | –û—Ç–∫—Ä—ã–≤–∞–µ—Ç shell –¥–ª—è –ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä, `psql`)            | `python manage.py dbshell`                          |
| üóÉ **–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ (—Ñ–∏–∫—Å—Ç—É—Ä—ã)**   | `dumpdata`         | –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ JSON (—Ñ–∏–∫—Å—Ç—É—Ä—ã)                     | `python manage.py dumpdata > data.json`             |
|                                      | `loaddata`         | –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON-—Ñ–∞–π–ª–∞                          | `python manage.py loaddata data.json`               |
| üìñ **–†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏**           | `makemessages`     | –ü–æ–∏—Å–∫ —Å—Ç—Ä–æ–∫ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ (—Å–æ–∑–¥–∞–µ—Ç `.po`)             | `python manage.py makemessages -l ru`               |
|                                      | `compilemessages`  | –ö–æ–º–ø–∏–ª—è—Ü–∏—è `.po` –≤ `.mo` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è           | `python manage.py compilemessages`                  |
| üì¶ **–ö—ç—à –∏ —Å–µ—Å—Å–∏–∏**                  | `createcachetable` | –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É –≤ –ë–î –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—ç—à–∞               | `python manage.py createcachetable`                 |
|                                      | `clearsessions`    | –£–¥–∞–ª—è–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Å–µ—Å—Å–∏–∏ –∏–∑ –ë–î                      | `python manage.py clearsessions`                    |
| üîß **–û—Ç–ª–∞–¥–∫–∞ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ**   | `check`            | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –æ—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏              | `python manage.py check`                            |
|                                      | `diffsettings`     | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫               | `python manage.py diffsettings`                     |
|                                      | `sendtestemail`    | –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–∏—Å—å–º–∞ (–µ—Å–ª–∏ email –Ω–∞—Å—Ç—Ä–æ–µ–Ω)      | `python manage.py sendtestemail user@example.com`   |
| üìú **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã**      | (–∏–º—è –∫–æ–º–∞–Ω–¥—ã)      | –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤ `management/commands/`           | `python manage.py close_orders`                     |

–ö–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã –≤ —Ü–µ–ª–æ–º –Ω–∞—É—á–∏–ª–∏—Å—å, –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã, –∏–ª–∏ –∫–∞–∫ –º–æ–∂–Ω–æ –Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ.

## üîÑ **–ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç–∞ —Å –ë–î**

### makemigrations

–£–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –≤–∞–º –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞—ë—Ç —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π, –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è
–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–ú–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤–∞–∂–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `--empty`, –ø—Ä–∏ —ç—Ç–æ–º —Ñ–ª–∞–≥–µ —Å–æ–∑–¥–∞—Å—Ç—Å—è –ø—É—Å—Ç–∞—è –º–∏–≥—Ä–∞—Ü–∏—è, –Ω–∏–∫–∞–∫ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–∞—è –∫ –º–æ–¥–µ–ª—è–º.
–í—ã–≥–ª—è–¥–µ—Ç—å –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ –≤–æ—Ç —Ç–∞–∫:

```python


from django.db import migrations


class Migration(migrations.Migration):
    dependencies = [
        ('storages', '0003_auto_20201029_1352'),
    ]

    operations = [
    ]
```

–¢—É—Ç —É–∫–∞–∑–∞–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –º–∏–≥—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∞, –∏ –ø—Ä–æ—à–ª–∞—è –º–∏–≥—Ä–∞—Ü–∏—è, —Å –∫–æ—Ç–æ—Ä–æ–π —Ç–µ–∫—É—â–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç
—Å–≤—è–∑–∞–Ω–∞.

–ó–∞—á–µ–º —ç—Ç–æ –≤–æ–æ–±—â–µ –Ω–∞–¥–æ?

–ú—ã –º–æ–∂–µ–º –≤ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–±–∞–≤–∏—Ç—å –ª—é–±—ã–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –Ω–∞—Å –¥–µ–π—Å—Ç–≤–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –Ω–∞ Python.

–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–ª–∞—Å—Å `RunPython` –∏–∑ –ø–∞–∫–µ—Ç–∞ `migrations`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –¥–≤–∞ –º–µ—Ç–æ–¥–∞, –ø–µ—Ä–≤—ã–π –±—É–¥–µ—Ç
–≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Å–ª—É—á–∞–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏, –≤—Ç–æ—Ä–æ–π - –≤ —Å–ª—É—á–∞–µ –æ—Ç–∫–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏.

```python


from django.db import migrations


def some_forward_action(apps, schema_editor):
    Team = apps.get_model('storages', 'Team')
    Team.objects.create(name='B2B')
    Team.objects.create(name='CX')
    Team.objects.create(name='SFA')


def some_backward_action(apps, schema_editor):
    pass


class Migration(migrations.Migration):
    dependencies = [
        ('storages', '0003_auto_20201029_1352'),
    ]

    operations = [
        migrations.RunPython(some_forward_action, some_backward_action)
    ]
```

–¢–∞–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è **Data Migrations**.

–ß–∞—â–µ –≤—Å–µ–≥–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞–Ω–µ—Å—Ç–∏ –∫–∞–∫–∏–µ-–ª–∏–±–æ –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —ç—Ç–∞–ø–µ –º–∏–≥—Ä–∞—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞—Ç—å –∑–∞–≤–µ–¥–æ–º–æ
–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –∫–∞–∫ –≤ –º–æ—ë–º –ø—Ä–∏–º–µ—Ä–µ, –∏–ª–∏ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã—á–∏—Å–ª—è–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

–î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ —á–∞—â–µ –≤—Å–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è (—Ö–æ—Ç—å –∏ –¥–∞–ª–µ–∫–æ –Ω–µ –≤—Å–µ–≥–¥–∞).

#### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä Data Migration:

```python
from django.db import migrations


def create_initial_teams(apps, schema_editor):
    """–°–æ–∑–¥–∞—ë—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏."""
    Team = apps.get_model('storages', 'Team')
    Team.objects.create(name='B2B')
    Team.objects.create(name='CX')
    Team.objects.create(name='SFA')


class Migration(migrations.Migration):
    dependencies = [
        ('storages', '0003_auto_20201029_1352'),
    ]

    operations = [
        # –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º RunPython.noop –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
        migrations.RunPython(create_initial_teams, migrations.RunPython.noop)
    ]
```

> üí° **–°–æ–≤–µ—Ç:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `migrations.RunPython.noop` –≤–º–µ—Å—Ç–æ `lambda x, y: None` ‚Äî —ç—Ç–æ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥.

#### –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:

```python
def create_default_category(apps, schema_editor):
    Category = apps.get_model('shop', 'Category')
    Category.objects.create(name='Uncategorized', slug='uncategorized')


def delete_default_category(apps, schema_editor):
    Category = apps.get_model('shop', 'Category')
    Category.objects.filter(slug='uncategorized').delete()


class Migration(migrations.Migration):
    operations = [
        migrations.RunPython(create_default_category, delete_default_category)
    ]
```

### migrate

–£–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –≤–∞–º –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

–ö–æ–º–∞–Ω–¥–∞ migrate –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å —Ç–µ–∫—É—â–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.

```
python manage.py migrate [app_label] [migration_name]
```

- app_label ‚Äî –∏–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å.

- migration_name ‚Äî –∏–º—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ (–æ–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—Ä–≤—ã—Ö —á–µ—Ç—ã—Ä—ë—Ö —Ü–∏—Ñ—Ä –∏–∑ –∏–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏).

–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–∏–º–µ–Ω–∏—Ç **–≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**.

#### –ü—Ä–∏–º–µ—Ä: –æ—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

–î–æ–ø—É—Å—Ç–∏–º, –≤—ã —É–∂–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ `0008`, –Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –æ—à–∏–±–∫—É –≤ `0006`. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫–∞—Ç–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–¥–æ –º–∏–≥—Ä–∞—Ü–∏–∏ `0005`:

```bash
python manage.py migrate my_app 0005
```

> ‚ö†Ô∏è –≠—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –æ—Ç–∫–∞—Ç—É –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π –ø–æ—Å–ª–µ 0005 –∏, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —É–¥–∞–ª—è–µ–º—ã–º–∏
> –º–æ–¥–µ–ª—è–º–∏ –∏ –ø–æ–ª—è–º–∏.

#### –§–ª–∞–≥ `--fake`

–§–ª–∞–≥ `--fake` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–º–µ—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é, **–Ω–µ –≤–Ω–æ—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```bash
python manage.py migrate my_app 0005 --fake
```

–≠—Ç–æ—Ç –ø—Ä–∏—ë–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö, –∫–æ–≥–¥–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ –±—ã–ª–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω—é—é —Å–∏—Å—Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä
–ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å –¥—Ä—É–≥–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –Ω–∞ –¥–∂–∞–Ω–≥–æ), –∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å Django —Å –µ—ë —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.

#### –û—Ç–∫–∞—Ç –¥–æ –Ω—É–ª—è

–ï—Å–ª–∏ –≤–º–µ—Å—Ç–æ –Ω–æ–º–µ—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ —É–∫–∞–∑–∞—Ç—å `zero`, –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å **–≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏** –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
python manage.py migrate my_app zero
```

> üî• **–í–∞–∂–Ω–æ:** –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π —É–¥–∞–ª–∏—Ç —Ç–∞–±–ª–∏—Ü—ã –∏ –¥–∞–Ω–Ω—ã–µ. –°–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é!


### showmigrations

–¢–∞–∫–∂–µ —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –≤–∞–º –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–æ–±—Ä–∞–∑–∏—Ç —Å–ø–∏—Å–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–π –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∏–ª–∏ –Ω–µ—Ç).


### `sqlmigrate`

–ö–æ–º–∞–Ω–¥–∞ `sqlmigrate` –ø–æ–∑–≤–æ–ª—è–µ—Ç **–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å SQL-–∫–æ–¥**, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ:

- –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ **—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** –±—É–¥—É—Ç –≤–Ω–µ—Å–µ–Ω—ã –≤ –±–∞–∑—É;
- –ø—Ä–æ–≤–µ—Å—Ç–∏ **–∞—É–¥–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–π** –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º;
- –ø–æ–ª—É—á–∏—Ç—å SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–ª–∏ –∏–∑—É—á–µ–Ω–∏—è.

```bash
python manage.py sqlmigrate <app_label> <migration_name>
```

- `app_label` ‚Äî –∏–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä `users`;
- `migration_name` ‚Äî –∏–º—è –º–∏–≥—Ä–∞—Ü–∏–∏ **–±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `0XXX_`**, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ `0001` –∏–ª–∏ `initial`.

#### –ü—Ä–∏–º–µ—Ä:

```bash
python manage.py sqlmigrate users 0001
```

–í—ã–≤–æ–¥ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å SQL-–∑–∞–ø—Ä–æ—Å—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –∏ –∏–Ω–¥–µ–∫—Å–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```sql
CREATE TABLE "users_user" (
    "id" integer NOT NULL PRIMARY KEY AUTOINCREMENT,
    "username" varchar(150) NOT NULL UNIQUE,
    "email" varchar(254) NOT NULL
);
```

> üîç **–°–æ–≤–µ—Ç:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sqlmigrate`, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –≤—ã –≤–Ω–æ—Å–∏—Ç–µ –ø—Ä–∞–≤–∫–∏ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `RunSQL`.

### squashmigrations

–ö–æ–º–∞–Ω–¥–∞ `squashmigrations` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π –≤ –æ–¥–Ω—É, —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–∏–≥—Ä–∞—Ü–∏–π –∏ —É–ª—É—á—à–∏—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞.

–≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∫–æ–≥–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞–∫–æ–ø–∏–ª–æ—Å—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–∏–≥—Ä–∞—Ü–∏–π, –¥–æ–±–∞–≤–ª—è—é—â–∏—Ö –ø–æ–ª—è, –∏–∑–º–µ–Ω—è—é—â–∏—Ö —Ç–∏–ø—ã –∏–ª–∏ —É–¥–∞–ª—è—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –º–æ–¥–µ–ª–∏.

#### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```bash
python manage.py squashmigrations <app_label> <start_migration> <end_migration>
```

#### –ü—Ä–∏–º–µ—Ä

–î–æ–ø—É—Å—Ç–∏–º, –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ `myapp` –∏–º–µ—é—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏ `0004`, `0005`, `0006` –∏ `0007`, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–ª–∏ –∏–∑–º–µ–Ω—è–µ—Ç –ø–æ–ª—è –≤ –æ–¥–Ω–æ–π –º–æ–¥–µ–ª–∏. –ß—Ç–æ–±—ã –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏—Ö –≤ –æ–¥–Ω—É –º–∏–≥—Ä–∞—Ü–∏—é, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
python manage.py squashmigrations myapp 0004 0007
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é, —Å–æ–¥–µ—Ä–∂–∞—â—É—é —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ–∂–¥—É `0004` –∏ `0007`, –∏ –∑–∞–º–µ–Ω–∏—Ç —Å—Ç–∞—Ä—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏.

> –°–æ–≤–µ—Ç: squash-–∫–æ–º–∞–Ω–¥—ã —Å–ª–µ–¥—É–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ**, –∫–∞–∫ –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±—ã–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–∞ –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö, –∏–Ω–∞—á–µ –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

#### –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å squashmigrations

- –ü–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–¥–µ–ª–∏, –∫–æ–≥–¥–∞ –Ω–∞–∫–æ–ø–∏–ª–æ—Å—å –º–Ω–æ–≥–æ –º–∏–≥—Ä–∞—Ü–∏–π.
- –ü–µ—Ä–µ–¥ –≤—ã–ø—É—Å–∫–æ–º –≤ –ø—Ä–æ–¥–∞–∫—à–Ω, —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∞—É–¥–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–π.
- –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏ CI/CD.

#### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

Squash –Ω–µ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–¥–∞–ª–∏—Ç—å –∏—Ö –≤—Ä—É—á–Ω—É—é –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏.


### flush

–ö–æ–º–∞–Ω–¥–∞ `flush` –æ—á–∏—â–∞–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –æ—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–±—Ä–∞—Å—ã–≤–∞—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü, **–Ω–æ –Ω–µ –æ—Ç–º–µ–Ω—è—è –º–∏–≥—Ä–∞—Ü–∏–π –∏ –Ω–µ —É–¥–∞–ª—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã**.

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã:

- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ.
- –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–º–∏.
- –ë—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –≤–∫–ª—é—á–∞—è —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∑–∞–ø–∏—Å–∏ –º–æ–¥–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–π.
- –ó–Ω–∞—á–µ–Ω–∏—è –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã—Ö –ø–æ–ª–µ–π (`id`) –±—É–¥—É—Ç —Å–±—Ä–æ—à–µ–Ω—ã (–µ—Å–ª–∏ —ç—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –°–£–ë–î).

```bash
python manage.py flush
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º:

```bash
You have requested a flush of the database.
This will IRREVERSIBLY DESTROY all data in the database.
Are you sure you want to do this?
```

#### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:

- –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–±—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.
- –ü—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ ¬´—á–∏—Å—Ç–∞—è¬ª –±–∞–∑–∞.
- –î–ª—è –æ—á–∏—Å—Ç–∫–∏ –±–∞–∑—ã –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∏–∫—Å—Ç—É—Ä:

```bash
python manage.py flush
python manage.py loaddata initial_data.json
```

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `flush` –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ ‚Äî –æ–Ω–∞ —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ –∏—Ö –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –±–µ–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏.

### sqlflush

–ö–æ–º–∞–Ω–¥–∞ `sqlflush` –≤—ã–≤–æ–¥–∏—Ç SQL-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –∫–æ–º–∞–Ω–¥—ã [`flush`](#flush).

–≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ:

- –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫–∏–µ SQL-–∫–æ–º–∞–Ω–¥—ã –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω—ã;
- –ü–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –±—É–¥—É—Ç –æ—á–∏—â–µ–Ω—ã;
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQL –Ω–∞–ø—Ä—è–º—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏–ª–∏ –æ—Ç–ª–∞–¥–∫–∏).

#### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```
python manage.py sqlflush
```

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
$ python manage.py sqlflush
BEGIN;
DELETE FROM "myapp_modelname";
DELETE FROM "auth_user";
DELETE FROM "django_session";
...
COMMIT;
```

#### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ö–æ–º–∞–Ω–¥–∞ **–Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ—á–∏—Å—Ç–∫—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**, –æ–Ω–∞ **—Ç–æ–ª—å–∫–æ –ø–µ—á–∞—Ç–∞–µ—Ç SQL**, –∫–æ—Ç–æ—Ä—ã–π –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è.
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏.


### sqlsequencereset

–ö–æ–º–∞–Ω–¥–∞ `sqlsequencereset` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `id`) –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –≤–∞–∂–Ω–æ, –∫–æ–≥–¥–∞ –≤—ã –≤—Ä—É—á–Ω—É—é –æ—á–∏—â–∞–µ—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –∏ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —Å–ª–µ–¥—É—é—â–∞—è –≤—Å—Ç–∞–≤–∫–∞ –Ω–∞—á–∏–Ω–∞–ª–∞—Å—å —Å `id = 1`.

```bash
python manage.py sqlsequencereset <app_label>
```

- `<app_label>` ‚Äî –∏–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Django, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω—É–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

–ù–∞–ø—Ä–∏–º–µ—Ä:

```bash
python manage.py sqlsequencereset blog
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –≤–Ω–æ—Å–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –±–∞–∑—É –Ω–∞–ø—Ä—è–º—É—é, –∞ –ø—Ä–æ—Å—Ç–æ **–ø–µ—á–∞—Ç–∞–µ—Ç SQL-–∫–æ–¥**, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä—É—á–Ω–æ–π –æ—á–∏—Å—Ç–∫–µ —Ç–∞–±–ª–∏—Ü —Å –ø–æ–º–æ—â—å—é `flush` –∏–ª–∏ `truncate`.

#### –ü–æ—á–µ–º—É —ç—Ç–æ –Ω—É–∂–Ω–æ?

–ö–æ–≥–¥–∞ –≤—ã —É–¥–∞–ª—è–µ—Ç–µ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –≤—Ä—É—á–Ω—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `DELETE FROM`), —Å–ª–µ–¥—É—é—â–∏–π `id` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –±—É–¥–µ—Ç –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å 1, —Ç–∞–∫ –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (sequence). `sqlsequencereset` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–±—Ä–æ—Å–∏—Ç—å —ç—Ç–∏ sequence-–æ–±—ä–µ–∫—Ç—ã, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ID.

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
–ù–µ –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ —Å–±—Ä–æ—Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–π –±–∞–∑–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º –∫–ª—é—á–µ–π.

#### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```sql
SELECT setval(pg_get_serial_sequence('"myapp_mymodel"', 'id'), COALESCE(MAX("id"), 1), max("id") IS NOT null) FROM "myapp_mymodel";
```

–≠—Ç–æ—Ç SQL-–∑–∞–ø—Ä–æ—Å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ `id` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ.

### inspectdb

–ö–æ–º–∞–Ω–¥–∞ `inspectdb` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π Django –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

–≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –≤—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ö–µ–º–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–Ω–µ–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å —Å Django. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤—Ä—É—á–Ω—É—é –æ–ø–∏—Å—ã–≤–∞—Ç—å –º–æ–¥–µ–ª–∏, –≤—ã –º–æ–∂–µ—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

```bash
python manage.py inspectdb
```

–í—ã–≤–æ–¥ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å Python-–∫–æ–¥ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –º–æ–¥–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ —Ñ–∞–π–ª `models.py` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —É –≤–∞—Å –µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ `users` –∏ `orders`. –í—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É:

```bash
python manage.py inspectdb > myapp/models.py
```

–í—ã –ø–æ–ª—É—á–∏—Ç–µ —Ñ–∞–π–ª `models.py` —Å –∞–≤—Ç–æ—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏:

```python
class Users(models.Model):
    id = models.AutoField(primary_key=True)
    username = models.CharField(max_length=150)
    email = models.EmailField()

    class Meta:
        managed = False
        db_table = 'users'
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

- `--database`: –∏–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ (`default`).
- `--include-partial`: –¥–æ–±–∞–≤–ª—è–µ—Ç —á–∞—Å—Ç–∏—á–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–æ–ª—è.
- `--table`: –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π.

–ü—Ä–∏–º–µ—Ä –¥–ª—è –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã:

```bash
python manage.py inspectdb --table users
```

#### –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ

- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ –±—É–¥—É—Ç –∏–º–µ—Ç—å `managed = False`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ Django –Ω–µ –±—É–¥–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ —Ç–∞–±–ª–∏—Ü—ã.
- –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π –∏—Ö —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å: –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–æ–ª—è, –¥–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ç. –¥.
- –≠—Ç–æ —Ö–æ—Ä–æ—à–∏–π —Å—Ç–∞—Ä—Ç, –Ω–æ –Ω–µ –∑–∞–º–µ–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π –≤—Ä—É—á–Ω—É—é.

#### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

- –ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å PHP –∏–ª–∏ Java) –Ω–∞ Django.
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∞–∑–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Django ORM –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–π.
- –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π –¥–ª—è —Ä–µ–ø–æ—Ä—Ç–∞ –∏–ª–∏ –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —á—É–∂–æ–π –ë–î.

## üß† **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**

### changepassword

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

```manage.py changepassword ringo```

### createsuperuser

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ –≤—Å–µ–º–∏ –ø—Ä–∞–≤–∞–º–∏.


## üåê **–°–µ—Ä–≤–µ—Ä –∏ –∫–æ–Ω—Å–æ–ª—å**

### shell

–ö–æ–º–∞–Ω–¥–∞ `shell` –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é Python-–∫–æ–Ω—Å–æ–ª—å —Å —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π Django-—Å—Ä–µ–¥–æ–π. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –≤—Å—ë —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω–æ.

–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
```bash
python manage.py shell
```

–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è:
- –†—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –∏ –º–æ–¥–µ–ª–µ–π
- –í—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å ORM
- –ë—ã—Å—Ç—Ä–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö

---

### dbshell

–ö–æ–º–∞–Ω–¥–∞ `dbshell` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –∫–æ–Ω—Å–æ–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö `DATABASES`.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ PostgreSQL, –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç `psql`, –µ—Å–ª–∏ SQLite ‚Äî –æ–±—ã—á–Ω–∞—è SQLite-–∫–æ–Ω—Å–æ–ª—å –∏ —Ç.–¥.

–ü—Ä–∏–º–µ—Ä—ã:
```bash
python manage.py dbshell
```

–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è:
- –ü—Ä—è–º–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤
- –ë—ã—Å—Ç—Ä–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏–ª–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ
- –û—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –∏ —Å—Ö–µ–º–æ–π

> –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω—É–∂–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `psql` –¥–ª—è PostgreSQL, `mysql` –¥–ª—è MySQL).

---

### runserver

–ö–æ–º–∞–Ω–¥–∞ `runserver` –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä Django.

–ü—Ä–∏–º–µ—Ä:
```bash
python manage.py runserver
```

–ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å IP –∏ –ø–æ—Ä—Ç:
```bash
python manage.py runserver 0.0.0.0:8000
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Ä—Ç `8000` –∏ –∞–¥—Ä–µ—Å `127.0.0.1`.

–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è:
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ë—ã—Å—Ç—Ä–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** `runserver` –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞. –ù–∞ –±–æ–µ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ WSGI-—Å–µ—Ä–≤–µ—Ä—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ Gunicorn, uWSGI, Daphne –∏ —Ç. –ø.

## üóÉ **–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ (—Ñ–∏–∫—Å—Ç—É—Ä—ã)**

### dumpdata

–ö–æ–º–∞–Ω–¥–∞ `dumpdata` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ JSON-—Ñ–∞–π–ª–∞ (–∏–ª–∏ –≤ –¥—Ä—É–≥–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å).

–≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è:

- —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∏–∫—Å—Ç—É—Ä (fixtures), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–µ—Å—Ç–æ–≤—É—é –∏–ª–∏ –Ω–∞—á–∞–ª—å–Ω—É—é —Å—Ä–µ–¥—É;
- —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏–ª–∏ –º–æ–¥–µ–ª–µ–π;
- –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–∞–º–∏.

#### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```bash
python manage.py dumpdata [app_label.ModelName] [--indent N] [--output filename.json]
```

#### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã:
  ```bash
  python manage.py dumpdata > all_data.json
  ```

- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `blog`:
  ```bash
  python manage.py dumpdata blog > blog_data.json
  ```

- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ `Author`:
  ```bash
  python manage.py dumpdata blog.Author > authors.json
  ```

- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏ (—É–¥–æ–±–Ω–µ–µ –¥–ª—è —á—Ç–µ–Ω–∏—è):
  ```bash
  python manage.py dumpdata blog.Author --indent 2 > authors.json
  ```

- –° —É–∫–∞–∑–∞–Ω–∏–µ–º –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ –Ω–∞–ø—Ä—è–º—É—é:
  ```bash
  python manage.py dumpdata blog --output blog_data.json
  ```

#### –ü–æ–¥—Å–∫–∞–∑–∫–∞

–í—ã –º–æ–∂–µ—Ç–µ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã —Å `--exclude`:
```bash
python manage.py dumpdata --exclude auth.permission --exclude contenttypes > data.json
```

---

### loaddata

–ö–æ–º–∞–Ω–¥–∞ `loaddata` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON-—Ñ–∞–π–ª–∞ (–∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–∏–∫—Å—Ç—É—Ä) –æ–±—Ä–∞—Ç–Ω–æ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

–≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è:

- –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑—ã –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏;
- –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –Ω–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è);
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö.

#### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```bash
python manage.py loaddata filename.json
```

#### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

- –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–Ω–æ–≥–æ –¥–∞–º–ø–∞:
  ```bash
  python manage.py loaddata all_data.json
  ```

- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–º–ø–∞ —Ç–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π `Author`:
  ```bash
  python manage.py loaddata authors.json
  ```

- –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤:
  ```bash
  python manage.py loaddata file1.json file2.json
  ```

#### –ü–æ–¥—Å–∫–∞–∑–∫–∞

–§–∏–∫—Å—Ç—É—Ä—ã –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö `fixtures/` –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ‚Äî Django –∏—Ö –Ω–∞–π–¥—ë—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

> **–í–∞–∂–Ω–æ:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON-—Ñ–∞–π–ª–∞ –≤—Å–µ `id`, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ, –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –µ—Å—Ç—å. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏.

## üìñ **–†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏**

# –ö–æ–º–∞–Ω–¥—ã `makemessages` –∏ `compilemessages` –≤ Django

–í Django –∫–æ–º–∞–Ω–¥—ã `makemessages` –∏ `compilemessages` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π (–ø–µ—Ä–µ–≤–æ–¥–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ —Ä–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏).

## –ö–æ–º–∞–Ω–¥–∞ `makemessages`

–ö–æ–º–∞–Ω–¥–∞ `makemessages` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–∞ (`.po`), –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å—Ç—Ä–æ–∫–∏, –ø–æ–¥–ª–µ–∂–∞—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—É.

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```bash
python manage.py makemessages -l <locale> [–æ–ø—Ü–∏–∏]
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

- `-l, --locale` ‚Äî —è–∑—ã–∫ –ø–µ—Ä–µ–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `fr`, `pt_BR`, `uk`).
- `--ignore` ‚Äî —à–∞–±–ª–æ–Ω —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å.
- `--extension` ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤, –≥–¥–µ —Å–ª–µ–¥—É–µ—Ç –∏—Å–∫–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `.html`, `.txt`, `.py`).
- `--domain` ‚Äî –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `djangojs` –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ JS-—Ñ–∞–π–ª–æ–≤.

### –ü—Ä–∏–º–µ—Ä

```bash
python manage.py makemessages -l uk
```

–≠—Ç–æ—Ç –≤—ã–∑–æ–≤ —Å–æ–∑–¥–∞—Å—Ç (–∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç) —Ñ–∞–π–ª –ø–µ—Ä–µ–≤–æ–¥–∞ `uk/LC_MESSAGES/django.po`.

### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `makemessages`

- –í –ø—Ä–æ–µ–∫—Ç–∞—Ö —Å –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.
- –ü—Ä–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤, —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —à–∞–±–ª–æ–Ω–æ–≤.
- –í –ª—é–±—ã—Ö Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `gettext`, `ugettext`, –ª–∏–±–æ —à–∞–±–ª–æ–Ω–Ω—ã–µ —Ç–µ–≥–∏ `{% trans "..." %}`.

### –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∞

–í `views.py`:

```python
from django.utils.translation import gettext as _

def my_view(request):
    output = _("Welcome to my site.")
    return HttpResponse(output)
```

–í `.po` —Ñ–∞–π–ª–µ:

```po
msgid "Welcome to my site."
msgstr "–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –Ω–∞ –º—ñ–π —Å–∞–π—Ç."
```

---

## –ö–æ–º–∞–Ω–¥–∞ `compilemessages`

–ü–æ—Å–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è `.po` —Ñ–∞–π–ª–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ `.mo` —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Django –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```bash
python manage.py compilemessages [–æ–ø—Ü–∏–∏]
```

### –ü—Ä–∏–º–µ—Ä

```bash
python manage.py compilemessages
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–π–¥—ë—Ç –ø–æ –≤—Å–µ–º –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∞–º –∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç `.po` —Ñ–∞–π–ª—ã –≤ `.mo` —Ñ–∞–π–ª—ã.

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `compilemessages`

- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤.
- –ü–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π –∏ –¥–µ–ø–ª–æ–µ–º –ø—Ä–æ–µ–∫—Ç–∞, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å.

---

## –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏

```bash
# –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞
python manage.py makemessages -l fr

# –ü–µ—Ä–µ–≤–æ–¥ —Å—Ç—Ä–æ–∫ –≤—Ä—É—á–Ω—É—é –≤ —Ñ–∞–π–ª–µ locale/fr/LC_MESSAGES/django.po

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
python manage.py compilemessages
```

> **–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `settings.py` —É–∫–∞–∑–∞–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `LOCALE_PATHS`, —á—Ç–æ–±—ã Django –∑–Ω–∞–ª, –≥–¥–µ –∏—Å–∫–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã:
>
> ```python
> LOCALE_PATHS = [os.path.join(BASE_DIR, 'locale')]
> ```
## –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö manage-–∫–æ–º–∞–Ω–¥ –≤ Django

–í Django –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è `manage.py`, –∫–∞–∫ –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (`migrate`, `runserver`, `makemigrations` –∏ —Ç.–¥.). –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á: –æ—Ç—á—ë—Ç—ã, –º–∞—Å—Å–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –¥—Ä.

### –ü—Ä–∏–º–µ—Ä: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –∑–∞–∫–∞–∑–æ–≤ –≤ –ø–∏—Ü—Ü–µ—Ä–∏–∏

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç –ø–∏—Ü—Ü–µ—Ä–∏–∏, –∏ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 18:00 —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–ª–∞ –∑–∞–∫–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞–ª–∏—Å—å –≤ —Å—Ç–∞—Ç—É—Å–µ ¬´–æ—Ç–∫—Ä—ã—Ç¬ª, –ø–µ—Ä–µ–≤–æ–¥–∏–ª–∞ –∏—Ö –≤ —Å—Ç–∞—Ç—É—Å ¬´manual¬ª –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü—É –∑–∞–≤–µ–¥–µ–Ω–∏—è.

### –®–∞–≥ 1: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞—ë–º –∫–æ–º–∞–Ω–¥—É `close_orders` –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `orders`:

```
orders/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ models.py
‚îú‚îÄ‚îÄ management/
‚îÇ   ‚îî‚îÄ‚îÄ commands/
‚îÇ       ‚îî‚îÄ‚îÄ close_orders.py
‚îú‚îÄ‚îÄ tests.py
‚îî‚îÄ‚îÄ views.py
```

> –ü–∞–ø–∫–∏ `management` –∏ `commands` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–º–µ–Ω–Ω–æ —Å —Ç–∞–∫–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏.

### –®–∞–≥ 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã

```python
from django.core.management.base import BaseCommand
from orders.models import Order
from orders.utils import send_email  # –ø—Ä–∏–º–µ—Ä–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º

class Command(BaseCommand):
    help = "Close orders which weren't closed manually"

    def handle(self, *args, **options):
        orders = Order.objects.filter(status="opened")
        if orders.exists():
            orders.update(status="manual")
            send_email(
                subject="Unclosed orders",
                message=f"You have {orders.count()} unclosed orders marked as 'manual'.",
                to="owner@example.com"
            )
            self.stdout.write(self.style.SUCCESS("Successfully closed open orders."))
        else:
            self.stdout.write("No open orders to close.")
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã

–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é:

```bash
python manage.py close_orders
```

### –®–∞–≥ 4: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ CRON (Linux)

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ `cron` –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 18:00:

```cron
0 18 * * 1-5 /usr/bin/python3 /path/to/project/manage.py close_orders
```

> –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É—Ç—å –¥–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ –ø—Ä—è–º–æ –∏–∑ –Ω–µ–≥–æ.

---

–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö `manage.py` –∫–æ–º–∞–Ω–¥ ‚Äî –º–æ—â–Ω—ã–π —Å–ø–æ—Å–æ–± –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –∏ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

---

## üìã –ò—Ç–æ–≥–∏ –ª–µ–∫—Ü–∏–∏

–í —ç—Ç–æ–π –ª–µ–∫—Ü–∏–∏ –º—ã –∏–∑—É—á–∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Django –¥–ª—è –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                   | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                          |
|----------------------|----------------------------------------------|---------------------------------------------|
| **Logging**          | –ó–∞–ø–∏—Å—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è        | –û—Ç–ª–∞–¥–∫–∞, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –∞—É–¥–∏—Ç                  |
| **Middleware**       | –°–∫–≤–æ–∑–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ request/response          | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, timing, CORS, rate limiting |
| **Signals**          | –†–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –º–æ–¥–µ–ª–∏ | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∞—É–¥–∏—Ç, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞        |
| **Background Tasks** | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –≤–Ω–µ —Ü–∏–∫–ª–∞ –∑–∞–ø—Ä–æ—Å–∞            | Email, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤, –≤–Ω–µ—à–Ω–∏–µ API        |
| **Messages**         | –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é         | Flash-—Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ redirect              |
| **Manage-–∫–æ–º–∞–Ω–¥—ã**   | –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏                    | Cron-–∑–∞–¥–∞—á–∏, –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö, –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ    |

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞:

1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ JSON-—Ñ–æ—Ä–º–∞—Ç –≤ production, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å Sentry/ELK
2. **Middleware** ‚Äî –ø–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω! –ù–µ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ —Ç—è–∂—ë–ª—É—é –ª–æ–≥–∏–∫—É
3. **Signals** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `dispatch_uid`, –≤—ã–Ω–æ—Å–∏—Ç–µ —Ç—è–∂—ë–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥–∏
4. **Background Tasks** ‚Äî –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ ID –æ–±—ä–µ–∫—Ç–æ–≤, –Ω–µ —Å–∞–º–∏ –æ–±—ä–µ–∫—Ç—ã; –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `transaction.on_commit`
5. **Messages** ‚Äî –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ `MessageMiddleware` –∏ context processor
6. **Data Migrations** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `RunPython.noop` –¥–ª—è –æ–±—Ä–∞—Ç–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π

---

## üìù –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ

### –£—Ä–æ–≤–µ–Ω—å 1: –ë–∞–∑–æ–≤—ã–π

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:
   - –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ª–æ–≥–≥–µ—Ä –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤—ã–≤–æ–¥ –≤ —Ñ–∞–π–ª —Å —Ñ–æ—Ä–º–∞—Ç–æ–º `verbose`
   - –î–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ–¥–Ω—É –∏–∑ view (–Ω–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –æ—à–∏–±–∫–∏)

2. **–°–æ–∑–¥–∞–π—Ç–µ middleware** –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤:
   - –õ–æ–≥–∏—Ä—É–π—Ç–µ –º–µ—Ç–æ–¥, –ø—É—Ç—å –∏ –≤—Ä–µ–º—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
   - –î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Request-Duration` –≤ –æ—Ç–≤–µ—Ç

3. **–î–æ–±–∞–≤—å—Ç–µ flash-—Å–æ–æ–±—â–µ–Ω–∏—è** –≤ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞:
   - `messages.success` –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏
   - `messages.error` –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –£—Ä–æ–≤–µ–Ω—å 2: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π

4. **–°–æ–∑–¥–∞–π—Ç–µ —Å–∏–≥–Ω–∞–ª** –¥–ª—è –∞—É–¥–∏—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–æ–¥–µ–ª–∏:
   - –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –ª–æ–≥–∏—Ä—É–π—Ç–µ, –∫—Ç–æ –∏ —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `dispatch_uid`
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Å–∏–≥–Ω–∞–ª –≤ `apps.py`

5. **–ù–∞–ø–∏—à–∏—Ç–µ manage-–∫–æ–º–∞–Ω–¥—É** –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
   - –ö–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `--days=7`)
   - –í—ã–≤–æ–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `self.style.SUCCESS/ERROR`
   - –ü—Ä–∏–º–µ—Ä: –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞, –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

6. **–°–æ–∑–¥–∞–π—Ç–µ Data Migration**:
   - –î–æ–±–∞–≤—å—Ç–µ –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Å—Ç–∞—Ç—É—Å—ã, —Ä–æ–ª–∏)
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `RunPython.noop` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

### –£—Ä–æ–≤–µ–Ω—å 3: –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π

7. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ Request ID middleware**:
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ UUID –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ –µ–≥–æ –≤ –ª–æ–≥–∏ —á–µ—Ä–µ–∑ `logging.Filter`
   - –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ—Ç–≤–µ—Ç–∞

8. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å–∏–≥–Ω–∞–ª—ã —Å Background Tasks** (Django 6.0+):
   - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ —Å—Ç–∞–≤—å—Ç–µ –∑–∞–¥–∞—á—É –æ—Ç–ø—Ä–∞–≤–∫–∏ email –≤ –æ—á–µ—Ä–µ–¥—å
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `transaction.on_commit`

---

## ‚ùì –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏

1. –í –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è middleware –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞?

2. –ü–æ—á–µ–º—É —Å–∏–≥–Ω–∞–ª—ã –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `QuerySet.update()`?

3. –ß–µ–º `RunPython.noop` –ª—É—á—à–µ `lambda x, y: None`?

4. –ö–æ–≥–¥–∞ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `save()` –≤–º–µ—Å—Ç–æ —Å–∏–≥–Ω–∞–ª–∞ `post_save`?

5. –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `transaction.on_commit` –ø—Ä–∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥—å?

6. –ö–∞–∫–æ–π backend –¥–ª—è Background Tasks –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ production?

7. –ì–¥–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –∏ –ø–æ—á–µ–º—É?

8. –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç (user_id, request_id) –∫–æ –≤—Å–µ–º –ª–æ–≥–∞–º –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞?

---

[‚Üê –õ–µ–∫—Ü–∏—è 25: NoSQL. –ö—É–∫–∏, —Å–µ—Å—Å–∏–∏, –∫–µ—à](lesson25.md) | [–õ–µ–∫—Ü–∏—è 27: –ß—Ç–æ —Ç–∞–∫–æ–µ API. REST –∏ RESTful. Django REST Framework. ‚Üí](lesson27.md)