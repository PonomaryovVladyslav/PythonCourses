# –õ–µ–∫—Ü–∏—è 25. NoSQL. –ö—É–∫–∏, —Å–µ—Å—Å–∏–∏, –∫–µ—à

### –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞

<details>
  <summary>–ë–ª–æ–∫ 1 ‚Äî Python Basic (1‚Äì6)</summary>

  - [–õ–µ–∫—Ü–∏—è 1. –í–≤–µ–¥–µ–Ω–∏–µ. –¢–∏–ø–∏–∑–∞—Ü–∏–∏. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –°—Ç—Ä–æ–∫–∏ –∏ —á–∏—Å–ª–∞. –ë—É–ª–µ–≤–∞ –∞–ª–≥–µ–±—Ä–∞. –í–µ—Ç–≤–ª–µ–Ω–∏–µ](lesson01.md)
  - [–õ–µ–∫—Ü–∏—è 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π. –°–ø–∏—Å–∫–∏, —Å—Ç—Ä–æ–∫–∏ –¥–µ—Ç–∞–ª—å–Ω–µ–µ, —Å—Ä–µ–∑—ã, —Ü–∏–∫–ª—ã.](lesson02.md)
  - [–õ–µ–∫—Ü–∏—è 3. None. Range, list comprehension, sum, max, min, len, sorted, all, any. –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏](lesson03.md)
  - [–õ–µ–∫—Ü–∏—è 4. –•–µ—à-—Ç–∞–±–ª–∏—Ü—ã. Set, frozenset. Dict. Tuple. –ù–µ–º–Ω–æ–≥–æ –æ–± –∏–º–ø–æ—Ä—Ç–∞—Ö. Namedtuple, OrderedDict](lesson04.md)
  - [–õ–µ–∫—Ü–∏—è 5. –§—É–Ω–∫—Ü–∏–∏, —Ç–∏–ø–∏–∑–∞—Ü–∏—è, lambda. Map, zip, filter.](lesson05.md)
  - [–õ–µ–∫—Ü–∏—è 6. –ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö](lesson06.md)
</details>

<details>
  <summary>–ë–ª–æ–∫ 2 ‚Äî Git (7‚Äì8)</summary>

  - [–õ–µ–∫—Ü–∏—è 7. Git. –ò—Å—Ç–æ—Ä–∏—è —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π. –õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º.](lesson07.md)
  - [–õ–µ–∫—Ü–∏—è 8. Git. –£–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. Remote, push, pull. GitHub, Bitbucket, GitLab, etc. Pull request.](lesson08.md)
</details>

<details>
  <summary>–ë–ª–æ–∫ 3 ‚Äî Python Advanced (9‚Äì14)</summary>

  - [–õ–µ–∫—Ü–∏—è 9. –í–≤–µ–¥–µ–Ω–∏–µ –≤ –û–û–ü. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–¥–∏–≥–º—ã –û–û–ü. –ö–ª–∞—Å—Å—ã –∏ –æ–±—ä–µ–∫—Ç—ã. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ.](lesson09.md)
  - [–õ–µ–∫—Ü–∏—è 10. Magic methods. –ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã.](lesson10.md)
  - [–õ–µ–∫—Ü–∏—è 11. Imports. Standard library. PEP 8](lesson11.md)
  - [–õ–µ–∫—Ü–∏—è 12. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –∫–ª–∞—Å—Å–æ–≤ (staticmethod, classmethod, property)](lesson12.md)
  - [–õ–µ–∫—Ü–∏—è 13. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](lesson13.md)
  - [–õ–µ–∫—Ü–∏—è 14. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –ü–∞—Ç—Ç–µ—Ä–Ω—ã. SOLID.](lesson14.md)
</details>

<details>
  <summary>–ë–ª–æ–∫ 4 ‚Äî SQL (15‚Äì17)</summary>

  - [–õ–µ–∫—Ü–∏—è 15. –°–£–ë–î. PostgreSQL. SQL. DDL. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏. DCL. DML. –°–≤—è–∑–∏.](lesson15.md)
  - [–õ–µ–∫—Ü–∏—è 16. –°–£–ë–î. DQL. SELECT. –ò–Ω–¥–µ–∫—Å—ã. Group by. Joins.](lesson16.md)
  - [–õ–µ–∫—Ü–∏—è 17. –°–£–ë–î. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è. –ê–Ω–æ–º–∞–ª–∏–∏. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. ACID. TCL. Backup](lesson17.md)
</details>

- [–õ–µ–∫—Ü–∏—è 18. Virtual env. Pip. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã–µ –º–æ–¥—É–ª–∏. Pyenv.](lesson18.md)

<details open>
  <summary>–ë–ª–æ–∫ 5 ‚Äî Django (19‚Äì26)</summary>

  - [–õ–µ–∫—Ü–∏—è 19. –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å Django](lesson19.md)
  - [–õ–µ–∫—Ü–∏—è 20. Templates. Static](lesson20.md)
  - [–õ–µ–∫—Ü–∏—è 21. –ú–æ–¥–µ–ª–∏. –°–≤—è–∑–∏. Meta. Abstract, proxy](lesson21.md)
  - [–õ–µ–∫—Ü–∏—è 22. Django ORM](lesson22.md)
  - [–õ–µ–∫—Ü–∏—è 23. Forms, ModelForms. User, Authentication](lesson23.md)
  - [–õ–µ–∫—Ü–∏—è 24. ClassBaseView](lesson24.md)
  - ‚ñ∂ **–õ–µ–∫—Ü–∏—è 25. NoSQL. –ö—É–∫–∏, —Å–µ—Å—Å–∏–∏, –∫–µ—à**
  - [–õ–µ–∫—Ü–∏—è 26. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ. Middleware. Signals. Background Tasks. Messages. Manage commands](lesson26.md)
</details>

<details>
  <summary>–ë–ª–æ–∫ 6 ‚Äî Django Rest Framework (27‚Äì30)</summary>

  - [–õ–µ–∫—Ü–∏—è 27. –ß—Ç–æ —Ç–∞–∫–æ–µ API. REST –∏ RESTful. Django REST Framework.](lesson27.md)
  - [–õ–µ–∫—Ü–∏—è 28. @api_view, APIView, ViewSets, Pagination, Routers](lesson28.md)
  - [–õ–µ–∫—Ü–∏—è 29. REST-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è. Permissions. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è.](lesson29.md)
  - [–õ–µ–∫—Ü–∏—è 30. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. Django, REST API.](lesson30.md)
</details>

<details>
  <summary>–ë–ª–æ–∫ 7 ‚Äî Python async (31‚Äì33)</summary>

  - [–õ–µ–∫—Ü–∏—è 31. Celery. Multithreading. GIL. Multiprocessing](lesson31.md)
  - [–õ–µ–∫—Ü–∏—è 32. Asyncio. Aiohttp. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ.](lesson32.md)
  - [–õ–µ–∫—Ü–∏—è 33. –°–æ–∫–µ—Ç—ã. Django Channels.](lesson33.md)
</details>

<details>
  <summary>–ë–ª–æ–∫ 8 ‚Äî Deployment (34‚Äì35)</summary>

  - [–õ–µ–∫—Ü–∏—è 34. Linux. –í—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –¥–ª—è –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∞.](lesson34.md)
  - [–õ–µ–∫—Ü–∏—è 35. Deployment](lesson35.md)
</details>

- [–õ–µ–∫—Ü–∏—è 36. –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. CI/CD. –ú–æ–Ω–æ–ª–∏—Ç –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã. Docker](lesson36.md)


![](https://imgb.ifunny.co/images/25d44f01a8e316a90fe39d4d7239a560e7f0c2fe1ae987596cd6788bd8eb1435_1.jpg)

## üìö –í–≤–µ–¥–µ–Ω–∏–µ –≤ NoSQL

### ü§î –ß—Ç–æ —Ç–∞–∫–æ–µ NoSQL?

`NoSQL` (–æ—Ç –∞–Ω–≥–ª. **Not Only SQL** ‚Äî ¬´–Ω–µ —Ç–æ–ª—å–∫–æ SQL¬ª) ‚Äî —ç—Ç–æ —Ç–µ—Ä–º–∏–Ω, –æ–±–æ–∑–Ω–∞—á–∞—é—â–∏–π —Ç–∏–ø—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, –æ—Ç–ª–∏—á–Ω—ã–µ –æ—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –°–£–ë–î. NoSQL –ë–î –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –±–æ–ª–µ–µ –≥–∏–±–∫–∏–µ –º–æ–¥–µ–ª–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º.

**–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:** NoSQL ‚Äî —ç—Ç–æ –Ω–µ ¬´–∑–∞–º–µ–Ω–∞ SQL¬ª, –∞ **–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ**. –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–±–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤–º–µ—Å—Ç–µ, –∫–∞–∂–¥–∞—è –¥–ª—è —Å–≤–æ–∏—Ö –∑–∞–¥–∞—á.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ:
- [–ß—Ç–æ —Ç–∞–∫–æ–µ NoSQL (Azure)](https://azure.microsoft.com/ru-ru/resources/cloud-computing-dictionary/what-is-nosql-database)
- [–û–±–∑–æ—Ä –Ω–∞ Habr](https://habr.com/ru/articles/152477/)

---

### üìú –ö—Ä–∞—Ç–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è

| –ì–æ–¥       | –°–æ–±—ã—Ç–∏–µ                                         |
|-----------|-------------------------------------------------|
| 1970      | –≠–¥–≥–∞—Ä –ö–æ–¥–¥ –ø—É–±–ª–∏–∫—É–µ—Ç —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—É—é –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö  |
| 1995-2000 | –ë—É–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, —Ä–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–æ–∫                    |
| 2004      | Google –ø—É–±–ª–∏–∫—É–µ—Ç —Å—Ç–∞—Ç—å—é –æ BigTable              |
| 2007      | Amazon –ø—É–±–ª–∏–∫—É–µ—Ç —Å—Ç–∞—Ç—å—é –æ Dynamo                |
| 2009      | –¢–µ—Ä–º–∏–Ω ¬´NoSQL¬ª —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–ø—É–ª—è—Ä–Ω—ã–º            |
| 2009      | MongoDB, Redis, Cassandra –≤—ã—Ö–æ–¥—è—Ç –≤ open source |
| 2010+     | NoSQL —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–π–Ω—Å—Ç—Ä–∏–º–æ–º                    |

---

### üß® –ü–æ—á–µ–º—É –ø–æ—è–≤–∏–ª—Å—è NoSQL?

–†–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, MySQL) –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

#### –ü—Ä–æ–±–ª–µ–º—ã SQL –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ   –ö–ª–∏–µ–Ω—Ç—ã   ‚îÇ
                    ‚îÇ  (–º–∏–ª–ª–∏–æ–Ω—ã) ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  –û–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä ‚îÇ  ‚Üê –£–∑–∫–æ–µ –º–µ—Å—Ç–æ!
                    ‚îÇ  PostgreSQL  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (Scale Up):**
- –î–æ–±–∞–≤–ª—è–µ–º RAM, CPU, SSD
- –î–æ—Ä–æ–≥–æ, –µ—Å—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –ø—Ä–µ–¥–µ–ª
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –æ—Ç–∫–∞–∑–∞

**–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (Scale Out):**
- –î–æ–±–∞–≤–ª—è–µ–º –±–æ–ª—å—à–µ —Å–µ—Ä–≤–µ—Ä–æ–≤
- SQL –ø–ª–æ—Ö–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –∏–∑-–∑–∞ JOIN –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

#### –ö–æ–≥–¥–∞ SQL —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π

| –ü—Ä–æ–±–ª–µ–º–∞                       | –ü—Ä–∏–º–µ—Ä                                                 |
|--------------------------------|--------------------------------------------------------|
| **–ñ—ë—Å—Ç–∫–∞—è —Å—Ö–µ–º–∞**              | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è —Ç—Ä–µ–±—É–µ—Ç ALTER TABLE –Ω–∞ –º–∏–ª–ª–∏–æ–Ω–∞—Ö —Å—Ç—Ä–æ–∫ |
| **JOIN –Ω–∞ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö**     | –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ 10 —Ç–∞–±–ª–∏—Ü –ø–æ 100 –º–ª–Ω —Å—Ç—Ä–æ–∫ –∫–∞–∂–¥–∞—è           |
| **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏** | –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ              |
| **–ù–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** | –õ–æ–≥–∏, —Å–æ–±—ã—Ç–∏—è, JSON —Å —Ä–∞–∑–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π                |

---

### ‚öñÔ∏è –ü–æ–¥—Ä–æ–±–Ω–æ –æ CAP-—Ç–µ–æ—Ä–µ–º–µ

**CAP-—Ç–µ–æ—Ä–µ–º–∞** (—Ç–∞–∫–∂–µ –Ω–∞–∑—ã–≤–∞–µ–º–∞—è **—Ç–µ–æ—Ä–µ–º–æ–π –ë—Ä—é–µ—Ä–∞**) –≥–ª–∞—Å–∏—Ç, —á—Ç–æ **–≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
–æ–±–µ—Å–ø–µ—á–∏—Ç—å**:

| –°–≤–æ–π—Å—Ç–≤–æ                                            | –û–ø–∏—Å–∞–Ω–∏–µ                                                                   |
|-----------------------------------------------------|----------------------------------------------------------------------------|
| **Consistency** (–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)                   | –í—Å–µ —É–∑–ª—ã –≤–∏–¥—è—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –º–æ–º–µ–Ω—Ç.                   |
| **Availability** (–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)                      | –°–∏—Å—Ç–µ–º–∞ –≤—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å (–¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è).     |
| **Partition Tolerance** (–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é) | –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –µ—Å—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã. |

üß† **–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ CAP-—Ç–µ–æ—Ä–µ–º–∞?**
–ü—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (–æ—Å–æ–±–µ–Ω–Ω–æ –≤ NoSQL) —á–∞—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è **–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å —á–µ–º-—Ç–æ** —Ä–∞–¥–∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä:

- –í —Å–ª—É—á–∞–µ —Å–µ—Ç–µ–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –º–æ–∂–Ω–æ **–ª–∏–±–æ –æ—Ç–∫–∞–∑–∞—Ç—å –≤ –¥–æ—Å—Ç—É–ø–µ (–∂–µ—Ä—Ç–≤—É–µ–º A)**,
- –õ–∏–±–æ **–æ—Ç–¥–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ (–∂–µ—Ä—Ç–≤—É–µ–º C)**.

**–í—ã–≤–æ–¥:** —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –º–∞–∫—Å–∏–º—É–º **–¥–≤–∞ –∏–∑ —Ç—Ä—ë—Ö —Å–≤–æ–π—Å—Ç–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**.

**–ü—Ä–∏–º–µ—Ä—ã:**
- üî∏ **Cassandra** ‚Äî AP: –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –ø–æ–∑–∂–µ (eventual consistency).
- üî∏ **MongoDB (–¥–æ 4.0)** ‚Äî CP: –∂–µ—Ä—Ç–≤—É–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–µ—Ç—å—é.
- üî∏ **Redis (–≤ –∫–ª–∞—Å—Ç–µ—Ä–µ)** ‚Äî —á–∞—â–µ AP.

---

### üî¢ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã NoSQL –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

![](https://files.codingninjas.in/article_images/types-of-nosql-databases-0-1644120083.webp)

–°—É—â–µ—Å—Ç–≤—É–µ—Ç 4 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞ NoSQL –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, –∫–∞–∂–¥—ã–π –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ —Å–≤–æ–∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

---

#### 1. üóùÔ∏è Key-Value (–ö–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ)

–ü—Ä–æ—Å—Ç–µ–π—à–∞—è –º–æ–¥–µ–ª—å, –Ω–∞–ø–æ–º–∏–Ω–∞—é—â–∞—è —Å–ª–æ–≤–∞—Ä—å Python: `–∫–ª—é—á ‚Üí –∑–Ω–∞—á–µ–Ω–∏–µ`.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      –ö–ª—é—á       ‚îÇ          –ó–Ω–∞—á–µ–Ω–∏–µ            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ user:123        ‚îÇ {"name": "Alice", "age": 25} ‚îÇ
‚îÇ session:abc123  ‚îÇ {"user_id": 123, "cart": []} ‚îÇ
‚îÇ cache:homepage  ‚îÇ "<html>...</html>"           ‚îÇ
‚îÇ counter:visits  ‚îÇ 1542367                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚ö° –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø O(1)
- üîë –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –ø–æ –∫–ª—é—á—É (–Ω–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é)
- üì¶ –ó–Ω–∞—á–µ–Ω–∏–µ ‚Äî ¬´—á—ë—Ä–Ω—ã–π —è—â–∏–∫¬ª (—Å—Ç—Ä–æ–∫–∞, JSON, –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

**–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –ë–î                  | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                          | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å              |
|---------------------|--------------------------------------|---------------------------------|
| **Redis**           | In-memory, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, Pub/Sub | –ö–µ—à, —Å–µ—Å—Å–∏–∏, –æ—á–µ—Ä–µ–¥–∏, real-time |
| **Memcached**       | –¢–æ–ª—å–∫–æ –∫–µ—à, –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π            | –ü—Ä–æ—Å—Ç–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ             |
| **Amazon DynamoDB** | Managed, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π              | AWS-–ø—Ä–æ–µ–∫—Ç—ã, serverless         |
| **etcd**            | –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π, –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π        | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, service discovery |

**–†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- **GitHub** ‚Äî Redis –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π –∑–∞–¥–∞—á –∏ –∫–µ—à–∞
- **Twitter** ‚Äî Redis –¥–ª—è timeline –∏ —Å—á—ë—Ç—á–∏–∫–æ–≤
- **Pinterest** ‚Äî Redis –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

**–ü—Ä–∏–º–µ—Ä –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–π:**

```python
# –•–æ—Ä–æ—à–∏–µ –∫–ª—é—á–∏ ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, –ø–æ–Ω—è—Ç–Ω—ã–µ
"user:123:profile"           # –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123
"user:123:sessions"          # —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
"article:456:views"          # —Å—á—ë—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å—Ç–∞—Ç—å–∏
"cache:homepage:v2"          # –∫–µ—à –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –≤–µ—Ä—Å–∏—è 2
"ratelimit:ip:192.168.1.1"   # rate limiting –ø–æ IP

# –ü–ª–æ—Ö–∏–µ –∫–ª—é—á–∏
"u123"                       # –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ —á—Ç–æ —ç—Ç–æ
"data"                       # —Å–ª–∏—à–∫–æ–º –æ–±—â–µ–µ
"temp_value_for_user"        # –Ω–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```

---

#### 2. üìÑ Document-oriented (–î–æ–∫—É–º–µ–Ω—Ç–Ω—ã–µ –ë–î)

–•—Ä–∞–Ω—è—Ç –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (JSON, BSON). –ö–∞–∂–¥—ã–π –¥–æ–∫—É–º–µ–Ω—Ç ‚Äî —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å SQL:**

```
SQL (PostgreSQL):                    Document (MongoDB):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ users                   ‚îÇ          ‚îÇ {                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          ‚îÇ   "_id": "user_001",            ‚îÇ
‚îÇ id ‚îÇ name  ‚îÇ email      ‚îÇ          ‚îÇ   "name": "Alice",              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          ‚îÇ   "email": "alice@example.com", ‚îÇ
‚îÇ 1  ‚îÇ Alice ‚îÇ alice@...  ‚îÇ          ‚îÇ   "orders": [                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ     {"item": "Book", "qty": 2}, ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ     {"item": "Pen", "qty": 5}   ‚îÇ
‚îÇ orders                  ‚îÇ          ‚îÇ   ],                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          ‚îÇ   "address": {                  ‚îÇ
‚îÇ id ‚îÇ user_id ‚îÇ item     ‚îÇ          ‚îÇ     "city": "Moscow",           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          ‚îÇ     "zip": "123456"             ‚îÇ
‚îÇ 1  ‚îÇ 1       ‚îÇ Book     ‚îÇ          ‚îÇ   }                             ‚îÇ
‚îÇ 2  ‚îÇ 1       ‚îÇ Pen      ‚îÇ          ‚îÇ }                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚Üë –ù—É–∂–µ–Ω JOIN!                        ‚Üë –í—Å—ë –≤ –æ–¥–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ!
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- üìù –ì–∏–±–∫–∞—è —Å—Ö–µ–º–∞ ‚Äî —Ä–∞–∑–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–æ–ª—è
- üîç –ë–æ–≥–∞—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã ‚Äî –º–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –ø–æ –ª—é–±–æ–º—É –ø–æ–ª—é
- üì¶ –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚Äî –º–∞—Å—Å–∏–≤—ã, –æ–±—ä–µ–∫—Ç—ã –≤–Ω—É—Ç—Ä–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- üöÄ –ù–µ—Ç JOIN ‚Äî –¥–∞–Ω–Ω—ã–µ –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã

**–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –ë–î                    | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                          | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                  |
|-----------------------|--------------------------------------|-------------------------------------|
| **MongoDB**           | –°–∞–º–∞—è –ø–æ–ø—É–ª—è—Ä–Ω–∞—è, –±–æ–≥–∞—Ç—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª | –û–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –ø—Ä–æ—Ç–æ—Ç–∏–ø—ã        |
| **CouchDB**           | HTTP API, offline-first              | –ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è |
| **Firestore**         | Real-time, managed                   | Firebase-–ø—Ä–æ–µ–∫—Ç—ã, –º–æ–±–∏–ª—å–Ω—ã–µ         |
| **Amazon DocumentDB** | MongoDB-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π                  | AWS-–ø—Ä–æ–µ–∫—Ç—ã                         |

**–ö–æ–≥–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–Ω–∞—è –ë–î –ª—É—á—à–µ SQL:**

| –°—Ü–µ–Ω–∞—Ä–∏–π         | –ü–æ—á–µ–º—É –¥–æ–∫—É–º–µ–Ω—Ç–Ω–∞—è –ë–î –ª—É—á—à–µ                           |
|------------------|-------------------------------------------------------|
| CMS, –±–ª–æ–≥–∏       | –°—Ç–∞—Ç—å–∏ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–≤–∏–¥–µ–æ, –≥–∞–ª–µ—Ä–µ—è, —Ç–µ–∫—Å—Ç) |
| –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤  | –£ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ —Ñ—É—Ç–±–æ–ª–∫–∏ —Ä–∞–∑–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã                 |
| –õ–æ–≥–∏, —Å–æ–±—ã—Ç–∏—è    | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è                              |
| –ü—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ | –ù–µ –Ω—É–∂–Ω–æ –¥—É–º–∞—Ç—å –æ —Å—Ö–µ–º–µ –∑–∞—Ä–∞–Ω–µ–µ                       |

**–ö–æ–≥–¥–∞ SQL –ª—É—á—à–µ:**

| –°—Ü–µ–Ω–∞—Ä–∏–π         | –ü–æ—á–µ–º—É SQL –ª—É—á—à–µ          |
|------------------|---------------------------|
| –§–∏–Ω–∞–Ω—Å—ã, –±–∞–Ω–∫–∏–Ω–≥ | –ù—É–∂–Ω—ã ACID-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏     |
| –°–ª–æ–∂–Ω—ã–µ –æ—Ç—á—ë—Ç—ã   | –ù—É–∂–Ω—ã JOIN –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏    |
| –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –ú–Ω–æ–≥–æ —Å–≤—è–∑–µ–π many-to-many |

---

#### 3. üìä Column-family (–ö–æ–ª–æ–Ω–Ω–æ—á–Ω—ã–µ –ë–î)

–ö–æ–ª–æ–Ω–Ω–æ—á–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö **–Ω–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ –ø–æ—Ö–æ–∂–∏ –Ω–∞ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ**, –Ω–æ —Ä–∞–∑–ª–∏—á–∏–µ ‚Äî **–≤ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**.

##### üÜö –í —á—ë–º –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –ë–î?

```
Row-oriented (PostgreSQL):           Column-oriented (Cassandra):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ id ‚îÇ name  ‚îÇ age ‚îÇ city   ‚îÇ        ‚îÇ id:    [1, 2, 3, 4, 5...]   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§        ‚îÇ name:  [Alice, Bob, ...]    ‚îÇ
‚îÇ 1  ‚îÇ Alice ‚îÇ 30  ‚îÇ Moscow ‚îÇ        ‚îÇ age:   [30, 25, 28, ...]    ‚îÇ
‚îÇ 2  ‚îÇ Bob   ‚îÇ 25  ‚îÇ Prague ‚îÇ        ‚îÇ city:  [Moscow, Prague, ...]‚îÇ
‚îÇ 3  ‚îÇ Carol ‚îÇ 28  ‚îÇ Berlin ‚îÇ        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚Üë –°—Ç—Ä–æ–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–º–µ—Å—Ç–µ             ‚Üë –°—Ç–æ–ª–±—Ü—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–º–µ—Å—Ç–µ
```

|                      | –†–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –ë–î (PostgreSQL, MySQL) | –ö–æ–ª–æ–Ω–Ω–æ—á–Ω—ã–µ –ë–î (Cassandra, Bigtable)      |
|----------------------|------------------------------------|-------------------------------------------|
| –ï–¥–∏–Ω–∏—Ü–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è     | —Å—Ç—Ä–æ–∫–∞ (row)                       | —Å—Ç–æ–ª–±–µ—Ü (column) –∏–ª–∏ ¬´—Å–µ–º–µ–π—Å—Ç–≤–æ —Å—Ç–æ–ª–±—Ü–æ–≤¬ª |
| –§–∏–∑–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ  | —Å—Ç—Ä–æ–∫–∏ –ª–µ–∂–∞—Ç –≤–º–µ—Å—Ç–µ                | –∑–Ω–∞—á–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ –ª–µ–∂–∞—Ç –≤–º–µ—Å—Ç–µ      |
| –°—Ü–µ–Ω–∞—Ä–∏–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –∑–∞–ø–∏—Å—å/—á—Ç–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫                | –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º          |
| –ì–∏–±–∫–æ—Å—Ç—å —Å—Ö–µ–º—ã       | —Å—Ç—Ä–æ–≥–æ –∑–∞–¥–∞–Ω–∞                      | –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –Ω–∞–±–æ—Ä—ã —Å—Ç–æ–ª–±—Ü–æ–≤        |

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?**

```sql
-- –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –ë–´–°–¢–†–ï–ï –≤ –∫–æ–ª–æ–Ω–Ω–æ—á–Ω–æ–π –ë–î:
SELECT AVG(age) FROM users WHERE city = 'Moscow';
-- –ß–∏—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ 2 —Å—Ç–æ–ª–±—Ü–∞ (age, city), –∞ –Ω–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ

-- –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –ë–´–°–¢–†–ï–ï –≤ row-oriented –ë–î:
SELECT * FROM users WHERE id = 123;
-- –ß–∏—Ç–∞–µ–º –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É —Ü–µ–ª–∏–∫–æ–º
```

**–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –ë–î                   | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                         | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å        |
|----------------------|-------------------------------------|---------------------------|
| **Apache Cassandra** | –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è, –≤—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å | –õ–æ–≥–∏, IoT, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã |
| **Google Bigtable**  | Managed, –ø–µ—Ç–∞–±–∞–π—Ç—ã –¥–∞–Ω–Ω—ã—Ö           | Big Data, ML              |
| **ClickHouse**       | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞, –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π            | OLAP, –¥–∞—à–±–æ—Ä–¥—ã            |
| **Apache HBase**     | –ù–∞ –±–∞–∑–µ Hadoop                      | Big Data —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞       |

**–†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã:**
- **Netflix** ‚Äî Cassandra –¥–ª—è 10+ –ø–µ—Ç–∞–±–∞–π—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞—Ö
- **Discord** ‚Äî Cassandra –¥–ª—è –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
- **Uber** ‚Äî Cassandra –¥–ª—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∏ –ª–æ–≥–æ–≤

---

#### 4. üîó Graph (–ì—Ä–∞—Ñ–æ–≤—ã–µ –ë–î)

–ì—Ä–∞—Ñ–æ–≤—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω—è—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ **—É–∑–ª—ã (nodes)** –∏ **—Å–≤—è–∑–∏ (edges)** –º–µ–∂–¥—É –Ω–∏–º–∏.

```
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  Alice  ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ FRIEND
             ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   Bob   ‚îÇ‚îÄWORKS_AT‚îÄ‚ñ∂‚îÇ Google  ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ LIKES
             ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  Python ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–Ø–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ Cypher (Neo4j):**

```cypher
// –ù–∞–π—Ç–∏ –¥—Ä—É–∑–µ–π –¥—Ä—É–∑–µ–π Alice
MATCH (alice:Person {name: 'Alice'})-[:FRIEND]->()-[:FRIEND]->(fof)
RETURN fof.name

// –ù–∞–π—Ç–∏ –∫—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å –º–µ–∂–¥—É –¥–≤—É–º—è –ª—é–¥—å–º–∏
MATCH path = shortestPath(
  (a:Person {name: 'Alice'})-[:FRIEND*]-(b:Person {name: 'Charlie'})
)
RETURN path

// –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: "–õ—é–¥–∏, –∫–æ—Ç–æ—Ä—ã–µ –ª–∞–π–∫–Ω—É–ª–∏ —Ç–æ –∂–µ, —á—Ç–æ –∏ –≤—ã"
MATCH (me:Person {name: 'Alice'})-[:LIKES]->(thing)<-[:LIKES]-(other)
WHERE me <> other
RETURN other.name, COUNT(thing) as common_interests
ORDER BY common_interests DESC
```

##### üß† –ü–æ—á–µ–º—É –≥—Ä–∞—Ñ—ã —Ç–∞–∫ –≤–∞–∂–Ω—ã?

| –ó–∞–¥–∞—á–∞          | SQL –ø–æ–¥—Ö–æ–¥              | Graph –ø–æ–¥—Ö–æ–¥             |
|-----------------|-------------------------|--------------------------|
| –î—Ä—É–∑—å—è –¥—Ä—É–∑–µ–π   | 2 JOIN                  | 1 –ø—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å         |
| 6 —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–π   | 6 JOIN (–æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ) | –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å —Å –≥–ª—É–±–∏–Ω–æ–π 6 |
| –ö—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å | –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ CTE         | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º      |

**–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –ë–î                 | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                    | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å            |
|--------------------|--------------------------------|-------------------------------|
| **Neo4j**          | –°–∞–º–∞—è –ø–æ–ø—É–ª—è—Ä–Ω–∞—è, Cypher       | –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ |
| **Amazon Neptune** | Managed, AWS                   | AWS-–ø—Ä–æ–µ–∫—Ç—ã                   |
| **ArangoDB**       | Multi-model (graph + document) | –ì–∏–±—Ä–∏–¥–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏            |
| **JanusGraph**     | –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è, open source    | Big Data –≥—Ä–∞—Ñ—ã                |

**–†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã:**
- **LinkedIn** ‚Äî –≥—Ä–∞—Ñ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–≤—è–∑–µ–π (800M+ —É–∑–ª–æ–≤)
- **Airbnb** ‚Äî –≥—Ä–∞—Ñ –¥–æ–≤–µ—Ä–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞
- **eBay** ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä–∞—Ñ–∞ –ø–æ–∫—É–ø–æ–∫

---

### üí° –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: –∫–∞–∫—É—é NoSQL –≤—ã–±—Ä–∞—Ç—å?

| –°—Ü–µ–Ω–∞—Ä–∏–π             | –¢–∏–ø NoSQL         | –ü—Ä–∏–º–µ—Ä—ã –ë–î            | –ü–æ—á–µ–º—É                         |
|----------------------|-------------------|-----------------------|--------------------------------|
| –ö–µ—à, —Å–µ—Å—Å–∏–∏          | Key-Value         | Redis, Memcached      | O(1) –¥–æ—Å—Ç—É–ø, TTL               |
| –û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á        | Key-Value         | Redis, RabbitMQ       | Pub/Sub, —Å–ø–∏—Å–∫–∏                |
| CMS, –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ | Document          | MongoDB               | –ì–∏–±–∫–∞—è —Å—Ö–µ–º–∞                   |
| –õ–æ–≥–∏, —Å–æ–±—ã—Ç–∏—è        | Document / Column | MongoDB, Cassandra    | Append-only, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ   |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞, –æ—Ç—á—ë—Ç—ã    | Column-family     | ClickHouse, Cassandra | –ê–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º          |
| –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã (IoT) | Column-family     | InfluxDB, TimescaleDB | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è time-series    |
| –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏      | Graph             | Neo4j                 | –°–≤—è–∑–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏     |
| –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏         | Graph             | Neo4j, Neptune        | ¬´–ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã¬ª               |
| Fraud detection      | Graph             | Neo4j                 | –ü–æ–∏—Å–∫ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ |

---


### üÜö SQL vs NoSQL: –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –ö—Ä–∏—Ç–µ—Ä–∏–π            | SQL (PostgreSQL, MySQL)             | NoSQL (MongoDB, Redis)              |
|---------------------|-------------------------------------|-------------------------------------|
| **–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö**   | –¢–∞–±–ª–∏—Ü—ã, —Å—Ç—Ä–æ–∫–∏, —Å—Ç–æ–ª–±—Ü—ã            | –î–æ–∫—É–º–µ–Ω—Ç—ã, –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ, –≥—Ä–∞—Ñ—ã     |
| **–°—Ö–µ–º–∞**           | –°—Ç—Ä–æ–≥–∞—è, –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è       | –ì–∏–±–∫–∞—è, –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è              |
| **–Ø–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤**   | SQL (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω)              | –†–∞–∑–Ω—ã–π –¥–ª—è –∫–∞–∂–¥–æ–π –ë–î                |
| **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**      | ACID (–ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)             | –ß–∞—Å—Ç–æ BASE (eventual consistency)   |
| **–°–≤—è–∑–∏**           | JOIN, –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏                 | –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** | –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ (—Å–ª–æ–∂–Ω–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ) | –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ (—à–∞—Ä–¥–∏–Ω–≥)            |
| **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** | –°—Ç—Ä–æ–≥–∞—è                             | –ß–∞—Å—Ç–æ eventual                      |
| **–ó—Ä–µ–ª–æ—Å—Ç—å**        | 40+ –ª–µ—Ç, –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤—Ä–µ–º–µ–Ω–µ–º         | 15+ –ª–µ—Ç, –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è         |

---

### üî¨ ACID vs BASE

#### ACID (SQL)

| –°–≤–æ–π—Å—Ç–≤–æ        | –û–ø–∏—Å–∞–Ω–∏–µ                                                   |
|-----------------|------------------------------------------------------------|
| **A**tomicity   | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–ª–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–æ–æ–±—â–µ |
| **C**onsistency | –ë–î –≤—Å–µ–≥–¥–∞ –≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏                        |
| **I**solation   | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –≤–ª–∏—è—é—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞            |
| **D**urability  | –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ–µ           |

```python
# ACID –ø—Ä–∏–º–µ—Ä: –ø–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥
with transaction.atomic():
    sender.balance -= 100
    sender.save()
    receiver.balance += 100
    receiver.save()
    # –ï—Å–ª–∏ –∑–¥–µ—Å—å –æ—à–∏–±–∫–∞ ‚Äî –æ—Ç–∫–∞—Ç–∏—Ç—Å—è –í–°–Å
```

#### BASE (NoSQL)

| –°–≤–æ–π—Å—Ç–≤–æ                    | –û–ø–∏—Å–∞–Ω–∏–µ                                                      |
|-----------------------------|---------------------------------------------------------------|
| **B**asically **A**vailable | –°–∏—Å—Ç–µ–º–∞ –≤—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–µ—Ç (–≤–æ–∑–º–æ–∂–Ω–æ, —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏)       |
| **S**oft state              | –°–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –±–µ–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è |
| **E**ventual consistency    | –î–∞–Ω–Ω—ã–µ —Å—Ç–∞–Ω—É—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–º–∏... –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å                  |

```python
# BASE –ø—Ä–∏–º–µ—Ä: —Å—á—ë—Ç—á–∏–∫ –ª–∞–π–∫–æ–≤
redis.incr("post:123:likes")  # –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ
# –†–µ–ø–ª–∏–∫–∏ –ø–æ–ª—É—á–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–≤–∏–¥–µ—Ç—å 999 –ª–∞–π–∫–æ–≤ –≤–º–µ—Å—Ç–æ 1000 ‚Äî —ç—Ç–æ –û–ö
```

---

### üèóÔ∏è Polyglot Persistence: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞–∑–Ω—ã–µ –ë–î –≤–º–µ—Å—Ç–µ

–í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö**, –∫–∞–∂–¥—É—é –¥–ª—è —Å–≤–æ–µ–π –∑–∞–¥–∞—á–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
         ‚ñº              ‚ñº              ‚ñº              ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇPostgreSQL‚îÇ    ‚îÇ  Redis  ‚îÇ    ‚îÇ MongoDB ‚îÇ    ‚îÇ  Neo4j  ‚îÇ
    ‚îÇ          ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ         ‚îÇ
    ‚îÇ –ó–∞–∫–∞–∑—ã   ‚îÇ    ‚îÇ –ö–µ—à     ‚îÇ    ‚îÇ  –õ–æ–≥–∏   ‚îÇ    ‚îÇ –†–µ–∫–æ–º–µ–Ω-‚îÇ
    ‚îÇ –ü–ª–∞—Ç–µ–∂–∏  ‚îÇ    ‚îÇ –°–µ—Å—Å–∏–∏  ‚îÇ    ‚îÇ –°–æ–±—ã—Ç–∏—è ‚îÇ    ‚îÇ –¥–∞—Ü–∏–∏   ‚îÇ
    ‚îÇ –Æ–∑–µ—Ä—ã    ‚îÇ    ‚îÇ –û—á–µ—Ä–µ–¥–∏ ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ         ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∏–º–µ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞:**

| –î–∞–Ω–Ω—ã–µ                        | –ë–î            | –ü—Ä–∏—á–∏–Ω–∞                   |
|-------------------------------|---------------|---------------------------|
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∑–∞–∫–∞–∑—ã, –ø–ª–∞—Ç–µ–∂–∏ | PostgreSQL    | ACID, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏          |
| –°–µ—Å—Å–∏–∏, –∫–æ—Ä–∑–∏–Ω–∞               | Redis         | –°–∫–æ—Ä–æ—Å—Ç—å, TTL             |
| –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤               | MongoDB       | –†–∞–∑–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —É —Ç–æ–≤–∞—Ä–æ–≤ |
| –ü–æ–∏—Å–∫–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å              | Elasticsearch | –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫      |
| –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏                  | Neo4j         | ¬´–° —ç—Ç–∏–º —Ç–æ–≤–∞—Ä–æ–º –ø–æ–∫—É–ø–∞—é—Ç¬ª |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞                     | ClickHouse    | –ë—ã—Å—Ç—Ä—ã–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏         |

---

### üßæ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å NoSQL?

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π NoSQL, –µ—Å–ª–∏:**

| –ö—Ä–∏—Ç–µ—Ä–∏–π                       | –ü—Ä–∏–º–µ—Ä                                   |
|--------------------------------|------------------------------------------|
| –ì–∏–±–∫–∞—è/–º–µ–Ω—è—é—â–∞—è—Å—è —Å—Ö–µ–º–∞        | –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏     |
| –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ | –ú–∏–ª–ª–∏–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–µ—Ç–∞–±–∞–π—Ç—ã –¥–∞–Ω–Ω—ã—Ö |
| –í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏        | –õ–æ–≥–∏, —Å–æ–±—ã—Ç–∏—è, IoT-–¥–∞–Ω–Ω—ã–µ                |
| –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ                    | –°–µ—Å—Å–∏–∏, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ                 |
| –°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏         | –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏            |
| Eventual consistency –¥–æ–ø—É—Å—Ç–∏–º–∞ | –°—á—ë—Ç—á–∏–∫–∏ –ª–∞–π–∫–æ–≤, –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤              |

‚ùå **–û—Å—Ç–∞–≤–∞–π—Å—è –Ω–∞ SQL, –µ—Å–ª–∏:**

| –ö—Ä–∏—Ç–µ—Ä–∏–π                 | –ü—Ä–∏–º–µ—Ä                                   |
|--------------------------|------------------------------------------|
| –ù—É–∂–Ω—ã ACID-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏    | –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –ø–ª–∞—Ç–µ–∂–∏             |
| –°–ª–æ–∂–Ω—ã–µ JOIN –∏ –æ—Ç—á—ë—Ç—ã    | –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è, ERP-—Å–∏—Å—Ç–µ–º—ã                 |
| –°—Ç—Ä–æ–≥–∞—è —Å—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö     | –†–µ–≥—É–ª–∏—Ä—É–µ–º—ã–µ –æ—Ç—Ä–∞—Å–ª–∏ (–º–µ–¥–∏—Ü–∏–Ω–∞, —Ñ–∏–Ω–∞–Ω—Å—ã) |
| –ù–µ–±–æ–ª—å—à–æ–π –ø—Ä–æ–µ–∫—Ç         | –°—Ç–∞—Ä—Ç–∞–ø –Ω–∞ —Ä–∞–Ω–Ω–µ–π —Å—Ç–∞–¥–∏–∏                 |
| –ö–æ–º–∞–Ω–¥–∞ –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ SQL | –ù–µ —É—Å–ª–æ–∂–Ω—è–π –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏            |

---

### ‚ö†Ô∏è –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ NoSQL

#### 1. ¬´MongoDB ‚Äî —ç—Ç–æ –∫—Ä—É—Ç–æ, –¥–∞–≤–∞–π—Ç–µ –≤—Å—ë –Ω–∞ –Ω–µ–π!¬ª

```python
# ‚ùå –ü–ª–æ—Ö–æ: —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ MongoDB
def transfer_money(from_user, to_user, amount):
    # –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏!
    db.users.update_one({"_id": from_user}, {"$inc": {"balance": -amount}})
    # –ß—Ç–æ –µ—Å–ª–∏ –∑–¥–µ—Å—å –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç —Å–±–æ–π?
    db.users.update_one({"_id": to_user}, {"$inc": {"balance": amount}})
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π PostgreSQL –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤.

#### 2. ¬´Redis ‚Äî —ç—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, —Ö—Ä–∞–Ω–∏–º —Ç–∞–º –≤—Å—ë!¬ª

```python
# ‚ùå –ü–ª–æ—Ö–æ: Redis –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
redis.set("user:123", json.dumps(user_data))
# –ß—Ç–æ –µ—Å–ª–∏ Redis –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è? –î–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–Ω—ã!
```

**–†–µ—à–µ–Ω–∏–µ:** Redis ‚Äî –¥–ª—è –∫–µ—à–∞ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äî –≤ PostgreSQL.

#### 3. ¬´–ù–∞–º –Ω–µ –Ω—É–∂–Ω—ã JOIN, –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –≤—Å—ë!¬ª

```python
# ‚ùå –ü–ª–æ—Ö–æ: –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤–µ–∑–¥–µ
{
    "_id": "order_1",
    "user": {"name": "Alice", "email": "alice@example.com"},  # –ö–æ–ø–∏—è!
    "items": [...]
}
# –ï—Å–ª–∏ Alice —Å–º–µ–Ω–∏—Ç email ‚Äî –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –í–°–ï –∑–∞–∫–∞–∑—ã!
```

**–†–µ—à–µ–Ω–∏–µ:** –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑—É–π —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —á–∏—Ç–∞–µ—Ç—Å—è —á–∞—Å—Ç–æ –∏ –º–µ–Ω—è–µ—Ç—Å—è —Ä–µ–¥–∫–æ.

#### 4. ¬´–°—Ö–µ–º–∞ –Ω–µ –Ω—É–∂–Ω–∞, —ç—Ç–æ –∂–µ NoSQL!¬ª

```python
# ‚ùå –ü–ª–æ—Ö–æ: —Ö–∞–æ—Å –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
{"name": "Alice", "age": 25}
{"userName": "Bob", "years_old": "thirty"}  # –†–∞–∑–Ω—ã–µ –ø–æ–ª—è, —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã!
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å—Ö–µ–º—ã (JSON Schema –≤ MongoDB, Pydantic –≤ Python).

---

### üéØ –ß–µ–∫-–ª–∏—Å—Ç –≤—ã–±–æ—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```
1. –ù—É–∂–Ω—ã –ª–∏ ACID-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏?
   ‚îú‚îÄ –î–∞ ‚Üí PostgreSQL / MySQL
   ‚îî‚îÄ –ù–µ—Ç ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º

2. –ö–∞–∫–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö?
   ‚îú‚îÄ –¢–∞–±–ª–∏—á–Ω—ã–µ, —Å–≤—è–∑–∞–Ω–Ω—ã–µ ‚Üí PostgreSQL
   ‚îú‚îÄ –î–æ–∫—É–º–µ–Ω—Ç—ã (JSON) ‚Üí MongoDB
   ‚îú‚îÄ –ö–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí Redis
   ‚îú‚îÄ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã ‚Üí InfluxDB / TimescaleDB
   ‚îú‚îÄ –ì—Ä–∞—Ñ—ã ‚Üí Neo4j
   ‚îî‚îÄ –õ–æ–≥–∏, —Å–æ–±—ã—Ç–∏—è ‚Üí Elasticsearch / ClickHouse

3. –ö–∞–∫–æ–π –º–∞—Å—à—Ç–∞–±?
   ‚îú‚îÄ < 1M –∑–∞–ø–∏—Å–µ–π ‚Üí PostgreSQL —Å–ø—Ä–∞–≤–∏—Ç—Å—è
   ‚îú‚îÄ 1M ‚Äì 100M ‚Üí PostgreSQL —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –∏–ª–∏ NoSQL
   ‚îî‚îÄ > 100M ‚Üí –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –Ω—É–∂–µ–Ω NoSQL –∏–ª–∏ —à–∞—Ä–¥–∏–Ω–≥

4. –ö–∞–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞?
   ‚îú‚îÄ –ë–æ–ª—å—à–µ —á—Ç–µ–Ω–∏—è ‚Üí –ö–µ—à (Redis) + –ª—é–±–∞—è –ë–î
   ‚îú‚îÄ –ë–æ–ª—å—à–µ –∑–∞–ø–∏—Å–∏ ‚Üí Cassandra, MongoDB
   ‚îî‚îÄ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Üí ClickHouse, BigQuery
```

---

> üí¨ **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è:**
> Redis ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç. –û–Ω –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –≤ —Å—Ç–µ–∫–µ. –î–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ —Å—Ç–∞—Ä—Ç–µ, –µ–≥–æ —á–∞—Å—Ç–æ –¥–æ–±–∞–≤–ª—è—é—Ç –ø–æ–∑–∂–µ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, –æ—á–µ—Ä–µ–¥–µ–π –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π. –ù–∞—á–Ω–∏—Ç–µ —Å PostgreSQL + Redis ‚Äî —ç—Ç–æ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç 90% –∑–∞–¥–∞—á.

---

## üî¥ –ü—Ä–∞–∫—Ç–∏–∫–∞: —Ä–∞–±–æ—Ç–∞ —Å Redis –Ω–∞–ø—Ä—è–º—É—é

–•–æ—Ç—è Django –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–ª—è –∫–µ—à–∞ –∏ —Å–µ—Å—Å–∏–π, –∏–Ω–æ–≥–¥–∞ –ø–æ–ª–µ–∑–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å Redis –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `redis-py`.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install redis
```

### –ó–∞–ø—É—Å–∫ Redis

–ë–µ–∑ –∑–∞–ø—É—Å–∫–∞ Redis —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç!

```bash
redis-server
```

### –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```python
import redis

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
r = redis.Redis(host='localhost', port=6379, db=0, decode_responses=True)

# –°—Ç—Ä–æ–∫–∏ (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Ç–∏–ø)
r.set("user:1:name", "Alice")
r.get("user:1:name")  # "Alice"
r.set("user:1:name", "Alice", ex=3600)  # —Å TTL 1 —á–∞—Å

# –°—á—ë—Ç—á–∏–∫–∏
r.incr("page:views")  # –∞—Ç–æ–º–∞—Ä–Ω—ã–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç
r.incrby("page:views", 10)

# –•–µ—à–∏ (–∫–∞–∫ —Å–ª–æ–≤–∞—Ä–∏)
r.hset("user:1", mapping={"name": "Alice", "email": "alice@example.com"})
r.hget("user:1", "name")  # "Alice"
r.hgetall("user:1")  # {"name": "Alice", "email": "..."}

# –°–ø–∏—Å–∫–∏ (–æ—á–µ—Ä–µ–¥–∏)
r.lpush("queue:emails", "email1", "email2")
r.rpop("queue:emails")  # "email1" (FIFO)

# –ú–Ω–æ–∂–µ—Å—Ç–≤–∞
r.sadd("article:1:tags", "python", "django", "redis")
r.smembers("article:1:tags")  # {"python", "django", "redis"}

# Sorted Sets (–¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–æ–≤, –ª–∏–¥–µ—Ä–±–æ—Ä–¥–æ–≤)
r.zadd("leaderboard", {"alice": 100, "bob": 85, "charlie": 92})
r.zrevrange("leaderboard", 0, 2, withscores=True)  # —Ç–æ–ø-3

# TTL –∏ —É–¥–∞–ª–µ–Ω–∏–µ
r.expire("user:1:name", 300)  # —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å TTL
r.ttl("user:1:name")  # –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
r.delete("user:1:name")
```

# üç™ –ö—É–∫–∏, üßæ –°–µ—Å—Å–∏–∏ –∏ ‚ö° –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Django

> HTTP-–ø—Ä–æ—Ç–æ–∫–æ–ª –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ß—Ç–æ–±—ã ¬´–ø–æ–º–Ω–∏—Ç—å¬ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –∏ –Ω–µ –¥–µ–ª–∞—Ç—å –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
> –º–Ω–æ–≥–æ —Ä–∞–∑ ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫—É–∫–∏, —Å–µ—Å—Å–∏–∏ –∏ –∫–µ—à.

---

## üß≠ –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å

- **HTTP stateless** ‚Äî –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Å–∞–º –ø–æ —Å–µ–±–µ, –±–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏.
- **Cookie** ‚Äî —Å–ø–æ—Å–æ–± —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ (–±—Ä–∞—É–∑–µ—Ä–∞).
- **Session** ‚Äî —Å–ø–æ—Å–æ–± —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ —É–Ω–∏–∫–∞–ª—å–Ω–æ–º—É `sessionid`,
  –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–º—É –≤ Cookie.
- **Cache** ‚Äî –±—ã—Å—Ç—Ä–∞—è –ø–∞–º—è—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º).

---

## üç™ Cookie (–ø–µ—á–µ–Ω—å–∫–∏)

–ö—É–∫–∏ ‚Äî —ç—Ç–æ –ø–∞—Ä—ã `–∫–ª—é—á:–∑–Ω–∞—á–µ–Ω–∏–µ`, –∫–æ—Ç–æ—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä —Ö—Ä–∞–Ω–∏—Ç –ª–æ–∫–∞–ª—å–Ω–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å –∫–∞–∂–¥—ã–º HTTP-–∑–∞–ø—Ä–æ—Å–æ–º –∫
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É –¥–æ–º–µ–Ω—É.

**–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:**

- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤
- –ó–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ç–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
- –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `sessionid`

![](https://www.web-labs.kz/wp-content/uploads/2020/05/cookie.png)

**–ö—É–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ HTTP –∑–∞–ø—Ä–æ—Å–∞!** –ò—Ö –º–æ–∂–µ—Ç –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä, –Ω–æ –ø—Ä—è–º–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É –æ–Ω–∏ –Ω–µ
–∏–º–µ—é—Ç!


**–ü—Ä–∏–º–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏/—É–¥–∞–ª–µ–Ω–∏—è cookie —Å —Ñ–ª–∞–≥–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

```python
from django.http import HttpResponse

resp = HttpResponse("ok")
resp.set_cookie(
    "theme", "dark", max_age=7*24*3600,
    secure=True, httponly=True, samesite="Lax"
)
# ...
resp.delete_cookie("theme")
```

### üîí –§–ª–∞–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ cookies

| –§–ª–∞–≥                | –û–ø–∏—Å–∞–Ω–∏–µ                                                          | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è                    |
|---------------------|-------------------------------------------------------------------|---------------------------------|
| `secure=True`       | Cookie –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ HTTPS                                 | ‚úÖ –í—Å–µ–≥–¥–∞ –≤ production           |
| `httponly=True`     | Cookie –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ JavaScript (–∑–∞—â–∏—Ç–∞ –æ—Ç XSS)                   | ‚úÖ –î–ª—è sessionid, —Ç–æ–∫–µ–Ω–æ–≤        |
| `samesite="Strict"` | Cookie –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å —Ç–æ–≥–æ –∂–µ —Å–∞–π—Ç–∞                        | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç CSRF     |
| `samesite="Lax"`    | Cookie –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, –Ω–æ –Ω–µ –ø—Ä–∏ POST —Å –¥—Ä—É–≥–∏—Ö —Å–∞–π—Ç–æ–≤ | ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –±–∞–ª–∞–Ω—Å          |
| `samesite="None"`   | Cookie –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞ (—Ç—Ä–µ–±—É–µ—Ç `secure=True`)                | –¢–æ–ª—å–∫–æ –¥–ª—è cross-site —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ |
| `max_age`           | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö                                            | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏—è             |
| `expires`           | –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ max_age)                             | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ max_age             |

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** Django –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `SESSION_COOKIE_HTTPONLY = True` –∏ `SESSION_COOKIE_SAMESITE = "Lax"`.

---

### üîê Signed Cookies (–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ –∫—É–∫–∏)

–û–±—ã—á–Ω—ã–µ cookies –º–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ. **Signed cookies** –∑–∞—â–∏—â–µ–Ω—ã –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –ø–æ–¥–ø–∏—Å—å—é ‚Äî Django –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ.

```python
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–π cookie
response.set_signed_cookie(
    "user_preference",
    "dark_mode",
    salt="user-prefs",  # –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞
    max_age=3600
)

# –ß—Ç–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–π cookie
try:
    value = request.get_signed_cookie(
        "user_preference",
        salt="user-prefs",
        max_age=3600  # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
    )
except (KeyError, signing.BadSignature):
    value = None  # cookie –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –ø–æ–¥–¥–µ–ª–∞–Ω–∞
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã –∫–ª–∏–µ–Ω—Ç–æ–º
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å–µ—Å—Å–∏—è–º –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

> üìå Signed cookies –∏—Å–ø–æ–ª—å–∑—É—é—Ç `SECRET_KEY` ‚Äî –ø—Ä–∏ –µ–≥–æ —Å–º–µ–Ω–µ –≤—Å–µ –ø–æ–¥–ø–∏—Å–∏ —Å—Ç–∞–Ω—É—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏.

---

## üßæ –°–µ—Å—Å–∏–∏
>
> –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://docs.djangoproject.com/en/stable/topics/http/sessions/ ‚Äî –æ—Å–Ω–æ–≤—ã —Å–µ—Å—Å–∏–π; –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: https://docs.djangoproject.com/en/stable/ref/settings/#sessions
>

–°–µ—Å—Å–∏—è ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ß–∞—â–µ –≤—Å–µ–≥–æ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
—Å–µ—Å—Å–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –∫—É–∫–∏.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Django:**

```plaintext
–ë—Ä–∞—É–∑–µ—Ä ‚Üí POST /login ‚Üí –°–µ—Ä–≤–µ—Ä:
    - —Å–æ–∑–¥–∞—ë—Ç Session –≤ –ë–î
    - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Set-Cookie: sessionid=<uuid>

–ë—Ä–∞—É–∑–µ—Ä ‚Üí GET /profile ‚Üí Cookie: sessionid ‚Üí –°–µ—Ä–≤–µ—Ä:
    - –¥–æ—Å—Ç–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ request.session
```

![](http://techbriefers.com/wp-content/uploads/2019/10/cookie-and-session-management-process-in-codeigniter.jpg)

**–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ:**

Django –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ backends –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫—É `SESSION_ENGINE`:

| Backend                     | SESSION_ENGINE                                    | –ü–ª—é—Å—ã            | –ú–∏–Ω—É—Å—ã                                |
|-----------------------------|---------------------------------------------------|------------------|---------------------------------------|
| **Database** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) | `django.contrib.sessions.backends.db`             | –ù–∞–¥—ë–∂–Ω–æ, –ø—Ä–æ—Å—Ç–æ  | –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î                        |
| **Cache**                   | `django.contrib.sessions.backends.cache`          | –ë—ã—Å—Ç—Ä–æ           | –î–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ       |
| **Cached DB**               | `django.contrib.sessions.backends.cached_db`      | –ë—ã—Å—Ç—Ä–æ + –Ω–∞–¥—ë–∂–Ω–æ | –°–ª–æ–∂–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞                     |
| **File**                    | `django.contrib.sessions.backends.file`           | –ü—Ä–æ—Å—Ç–æ           | –ú–µ–¥–ª–µ–Ω–Ω–æ, –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º |
| **Signed Cookie**           | `django.contrib.sessions.backends.signed_cookies` | –ë–µ–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞    | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 4KB, –¥–∞–Ω–Ω—ã–µ –≤–∏–¥–Ω—ã –∫–ª–∏–µ–Ω—Ç—É |

#### –ü—Ä–∏–º–µ—Ä: —Å–µ—Å—Å–∏–∏ –≤ Redis

```python
# settings.py

# 1. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–µ—à (Redis)
CACHES = {
    "default": {
        "BACKEND": "django_redis.cache.RedisCache",
        "LOCATION": "redis://127.0.0.1:6379/1",
        "OPTIONS": {"CLIENT_CLASS": "django_redis.client.DefaultClient"},
    }
}

# 2. –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–µ—à –¥–ª—è —Å–µ—Å—Å–∏–π
SESSION_ENGINE = "django.contrib.sessions.backends.cache"
SESSION_CACHE_ALIAS = "default"

# –ò–ª–∏ cached_db –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ (–∫–µ—à + –ë–î –∫–∞–∫ fallback)
# SESSION_ENGINE = "django.contrib.sessions.backends.cached_db"
```

> üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `cached_db` ‚Äî —ç—Ç–æ –¥–∞—ë—Ç —Å–∫–æ—Ä–æ—Å—Ç—å Redis –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ë–î.

**–ü—Ä–µ–¥–ø–æ—Å—ã–ª–∫–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–µ–Ω—ã –≤ —Ç–∏–ø–∏—á–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ):**
- `'django.contrib.sessions'` –≤ `INSTALLED_APPS`
- `'django.contrib.sessions.middleware.SessionMiddleware'` –≤ `MIDDLEWARE`
- (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) `'django.contrib.auth.middleware.AuthenticationMiddleware'`

---

### üõ† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
# –†–∞–±–æ—Ç–∞ —Å —Å–µ—Å—Å–∏–µ–π –≤ Django
request.session['visited'] = True

# –ü—Ä–æ–≤–µ—Ä–∫–∞
if request.session.get('visited'):
    ...

# –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∫–ª—é—á–∞
del request.session['visited']

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–µ—Å—Å–∏–∏ (—É–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π sessionid)
request.session.flush()

# –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ —Å–º–µ–Ω—ã sessionid
request.session.clear()
```

> üí° `flush()` —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏ logout ‚Äî —ç—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç session fixation –∞—Ç–∞–∫–∏.

### üí° –ü—Ä–∏–º–µ—Ä ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

```python
def post_comment(request, comment):
    if request.session.get('has_commented', False):
        return HttpResponse("You've already commented.")
    request.session['has_commented'] = True
    return HttpResponse("Thanks!")
```

### üß™ –ü—Ä–∏–º–µ—Ä ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏

```python
# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî datetime –Ω–µ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ JSON
# request.session['last_action'] = timezone.now()

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ ISO-—Å—Ç—Ä–æ–∫—É
from django.utils import timezone

request.session['last_action'] = timezone.now().isoformat()

# –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ
from datetime import datetime
last_action_str = request.session.get('last_action')
if last_action_str:
    last_action = datetime.fromisoformat(last_action_str)
```

> ‚ö†Ô∏è –°–µ—Å—Å–∏–∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É—é—Ç—Å—è –≤ JSON, –ø–æ—ç—Ç–æ–º—É –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ: `str`, `int`, `float`, `bool`, `list`, `dict`, `None`.

#### ‚è≥ –°—Ä–æ–∫ –∂–∏–∑–Ω–∏ —Å–µ—Å—Å–∏–∏

```python
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ (—Å–µ–∫—É–Ω–¥—ã)
request.session.set_expiry(3600)  # 1 —á–∞—Å
```

---

### üß© –í–Ω–µ –∑–∞–ø—Ä–æ—Å–∞ (SessionStore)

```python
from django.contrib.sessions.backends.db import SessionStore

s = SessionStore()
s['foo'] = 'bar'
s.create()
s.session_key  # —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –∫–ª—é—á
```

---

### üõë –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã

- –î–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É—é—Ç—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é JSON), –ø–æ—ç—Ç–æ–º—É –æ–±—ä–µ–∫—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã–º–∏. –ü–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–µ—Ä—ë–º —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞–ª–µ–µ –ø–æ –∫—É—Ä—Å—É.
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏** `request.session` –∫–∞–∫ –æ–±—ä–µ–∫—Ç–∞

```python
request.session['foo'] = 'bar'  # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è
request.session['foo']['x'] = 1  # ‚ùå –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è
```


–ü—Ä–∏ –≤–ª–æ–∂–µ–Ω–Ω–æ–π –º—É—Ç–∞—Ü–∏–∏ –ø–æ–º–µ—Ç—å—Ç–µ —Å–µ—Å—Å–∏—é –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–π:

```python
request.session.setdefault("cart", {})["id123"] = 2
request.session.modified = True  # –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
```


‚úÖ –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

```python
SESSION_SAVE_EVERY_REQUEST = True
```

---

### üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–µ—Å—Å–∏–π

```bash
python manage.py clearsessions
```

> –ö–æ–º–∞–Ω–¥—É —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (cron / periodic job) ‚Äî –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–¥–∞—á —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ–∑–∂–µ –ø–æ –∫—É—Ä—Å—É.


–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:

```python
from django.contrib.sessions.models import Session

Session.objects.filter(...).delete()
```

---

## ‚ö° –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
>
> –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://docs.djangoproject.com/en/stable/topics/cache/ ‚Äî –æ—Å–Ω–æ–≤—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è; –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: https://docs.djangoproject.com/en/stable/ref/settings/#std:setting-CACHES; per-view cache: https://docs.djangoproject.com/en/stable/topics/cache/#the-per-view-cache
>

### ü§î –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–µ—à?

**–ö–µ—à (cache)** ‚Äî —ç—Ç–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ: –≤—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –µ—Å—Ç—å –ª–∏ –º–æ–ª–æ–∫–æ. –≠—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Ä–µ–º—è. –ù–æ –µ—Å–ª–∏ –≤—ã –∑–∞–ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –º–æ–ª–æ–∫–æ –µ—Å—Ç—å, ‚Äî –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ —Å–Ω–æ–≤–∞. –≠—Ç–æ –∏ –µ—Å—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∫–µ—à –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å:**
- –ü–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (–∞–≥—Ä–µ–≥–∞—Ü–∏–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏)
- –ü–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º API
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —à–∞–±–ª–æ–Ω–æ–≤

![](https://cdn.acunetix.com/wp_content/uploads/2018/12/image1-1.png)

---

### ‚è±Ô∏è –ü–æ—á–µ–º—É –∫–µ—à –±—ã—Å—Ç—Ä–µ–µ?

| –û–ø–µ—Ä–∞—Ü–∏—è                           | –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è |
|------------------------------------|-----------------|
| –ß—Ç–µ–Ω–∏–µ –∏–∑ RAM (Redis)              | ~0.1 –º—Å         |
| –ß—Ç–µ–Ω–∏–µ –∏–∑ SSD                      | ~0.1-1 –º—Å       |
| –ó–∞–ø—Ä–æ—Å –∫ PostgreSQL (–ø—Ä–æ—Å—Ç–æ–π)      | ~1-10 –º—Å        |
| –ó–∞–ø—Ä–æ—Å –∫ PostgreSQL (—Å–ª–æ–∂–Ω—ã–π JOIN) | ~50-500 –º—Å      |
| –ó–∞–ø—Ä–æ—Å –∫ –≤–Ω–µ—à–Ω–µ–º—É API              | ~100-1000 –º—Å    |

–†–∞–∑–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ **100‚Äì1000 —Ä–∞–∑**! –ï—Å–ª–∏ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ–ª–∞–µ—Ç 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î –ø–æ 50 –º—Å –∫–∞–∂–¥—ã–π ‚Äî —ç—Ç–æ 500 –º—Å. –° –∫–µ—à–µ–º ‚Äî 1 –º—Å.

---

### üéØ –ß—Ç–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å?

**–•–æ—Ä–æ—à–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —á–∏—Ç–∞—é—Ç—Å—è —á–∞—Å—Ç–æ, –Ω–æ –º–µ–Ω—è—é—Ç—Å—è —Ä–µ–¥–∫–æ (—Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç—è–∂—ë–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –æ—Ç—á—ë—Ç—ã)
- –û—Ç–≤–µ—Ç—ã –≤–Ω–µ—à–Ω–∏—Ö API (–∫—É—Ä—Å—ã –≤–∞–ª—é—Ç, –ø–æ–≥–æ–¥–∞)
- –û—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã HTML (—Å–∞–π–¥–±–∞—Ä, –º–µ–Ω—é)
- –°–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è API

**–ü–ª–æ—Ö–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã:**
- –î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- –î–∞–Ω–Ω—ã–µ, –≥–¥–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å (–±–∞–ª–∞–Ω—Å —Å—á—ë—Ç–∞)

---

### üìä –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∫–µ—à–∞

- **Hit Rate** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—à–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ –∫–µ—à–µ. –¶–µ–ª—å: >90%
- **Miss Rate** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ–º–∞—Ö–æ–≤ (–¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç –≤ –∫–µ—à–µ)
- **TTL (Time To Live)** ‚Äî –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∑–∞–ø–∏—Å–∏ –≤ –∫–µ—à–µ
- **Eviction** ‚Äî –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø–∞–º—è—Ç–∏

```
Hit Rate = Cache Hits / (Cache Hits + Cache Misses) √ó 100%
```

> üí° –ï—Å–ª–∏ Hit Rate –Ω–∏–∑–∫–∏–π ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, TTL —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –∏–ª–∏ –∫–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

### üìö –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ä–∞–±–æ—Ç—ã —Å –∫–µ—à–µ–º. –í—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞–≥—Ä—É–∑–∫–∏.

#### 1Ô∏è‚É£ Cache-Aside (Lazy Loading)

**–°–∞–º–∞—è –ø–æ–ø—É–ª—è—Ä–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è.** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–∞–º–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–µ—à–µ–º.

```
–ß—Ç–µ–Ω–∏–µ:
1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à
2. –ï—Å–ª–∏ –µ—Å—Ç—å (cache hit) ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º
3. –ï—Å–ª–∏ –Ω–µ—Ç (cache miss) ‚Üí —á–∏—Ç–∞–µ–º –∏–∑ –ë–î ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–µ—à ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º

–ó–∞–ø–∏—Å—å:
1. –ü–∏—à–µ–º –≤ –ë–î
2. –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º (—É–¥–∞–ª—è–µ–º) –∫–µ—à
```

```python
def get_article(article_id):
    key = f"article:{article_id}"
    article = cache.get(key)

    if article is None:  # cache miss
        article = Article.objects.get(pk=article_id)
        cache.set(key, article, timeout=3600)

    return article

def update_article(article_id, data):
    article = Article.objects.get(pk=article_id)
    article.title = data['title']
    article.save()

    # –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º –∫–µ—à
    cache.delete(f"article:{article_id}")
```

‚úÖ **–ü–ª—é—Å—ã:** –ü—Ä–æ—Å—Ç–æ—Ç–∞, –∫–µ—à–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚ùå **–ú–∏–Ω—É—Å—ã:** –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤—Å–µ–≥–¥–∞ –º–µ–¥–ª–µ–Ω–Ω—ã–π (cold start)

---

#### 2Ô∏è‚É£ Write-Through

**–ó–∞–ø–∏—Å—å –∏–¥—ë—Ç —á–µ—Ä–µ–∑ –∫–µ—à.** –î–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã.

```
–ó–∞–ø–∏—Å—å:
1. –ü–∏—à–µ–º –≤ –∫–µ—à
2. –ö–µ—à —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–∏—à–µ—Ç –≤ –ë–î

–ß—Ç–µ–Ω–∏–µ:
1. –í—Å–µ–≥–¥–∞ —á–∏—Ç–∞–µ–º –∏–∑ –∫–µ—à–∞
```

```python
def save_article(article):
    article.save()  # –ë–î
    cache.set(f"article:{article.id}", article, timeout=3600)  # –ö–µ—à
```

‚úÖ **–ü–ª—é—Å—ã:** –î–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã, –Ω–µ—Ç cache miss –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏
‚ùå **–ú–∏–Ω—É—Å—ã:** –ó–∞–ø–∏—Å—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ (2 –æ–ø–µ—Ä–∞—Ü–∏–∏), –∫–µ—à–∏—Ä—É—é—Ç—Å—è –¥–∞–∂–µ —Ä–µ–¥–∫–æ —á–∏—Ç–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

---

#### 3Ô∏è‚É£ Write-Behind (Write-Back)

**–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ –ë–î.** –°–Ω–∞—á–∞–ª–∞ –ø–∏—à–µ–º –≤ –∫–µ—à, –ø–æ—Ç–æ–º —Ñ–æ–Ω–æ–≤–æ –≤ –ë–î.

```
–ó–∞–ø–∏—Å—å:
1. –ü–∏—à–µ–º –≤ –∫–µ—à
2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (—á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å) –ø–∏—à–µ–º –≤ –ë–î

–ß—Ç–µ–Ω–∏–µ:
1. –ß–∏—Ç–∞–µ–º –∏–∑ –∫–µ—à–∞
```

```python
def increment_views(article_id):
    # –ë—ã—Å—Ç—Ä–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ–º –≤ Redis
    cache.incr(f"article:{article_id}:views")

    # –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å –ë–î (—á–µ—Ä–µ–∑ Celery task)
    sync_views_to_db.delay(article_id)
```

‚úÖ **–ü–ª—é—Å—ã:** –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è –∑–∞–ø–∏—Å—å
‚ùå **–ú–∏–Ω—É—Å—ã:** –†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ–µ, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

#### 4Ô∏è‚É£ Read-Through

**–ö–µ—à —Å–∞–º –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ.** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∫–µ—à–µ–º.

```
–ß—Ç–µ–Ω–∏–µ:
1. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —É –∫–µ—à–∞
2. –ö–µ—à —Å–∞–º –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑ –ë–î –ø—Ä–∏ miss
```

–í Django —ç—Ç–æ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ `get_or_set`:

```python
def get_article(article_id):
    return cache.get_or_set(
        f"article:{article_id}",
        lambda: Article.objects.get(pk=article_id),
        timeout=3600
    )
```

---

### üéØ –ö–æ–≥–¥–∞ –∫–∞–∫—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

| –°—Ü–µ–Ω–∞—Ä–∏–π                                    | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è         |
|---------------------------------------------|---------------------------------|
| –ß—Ç–µ–Ω–∏–µ >> –ó–∞–ø–∏—Å—å (–±–ª–æ–≥, –∫–∞—Ç–∞–ª–æ–≥)            | **Cache-Aside**                 |
| –ö—Ä–∏—Ç–∏—á–Ω–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å                   | **Write-Through**               |
| –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –∑–∞–ø–∏—Å—å (—Å—á—ë—Ç—á–∏–∫–∏, –ª–æ–≥–∏) | **Write-Behind**                |
| –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∫–æ–¥–∞ –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ                  | **Read-Through** (`get_or_set`) |

---

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

#### Cache Stampede (Thundering Herd)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–µ—à –∏—Å—Ç—ë–∫, 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–¥—É—Ç –≤ –ë–î.

**–†–µ—à–µ–Ω–∏–µ:** –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–ª–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:

```python
import random

def get_with_early_refresh(key, fetch_func, timeout=3600):
    data, expires_at = cache.get(key, (None, 0))

    # –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ–µ —Ä–∞–Ω–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    if data and time.time() < expires_at:
        # 5% —à–∞–Ω—Å –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞—Ä–∞–Ω–µ–µ
        if random.random() < 0.05 and time.time() > expires_at - 60:
            data = fetch_func()
            cache.set(key, (data, time.time() + timeout), timeout)
        return data

    # Cache miss ‚Äî –æ–±–Ω–æ–≤–ª—è–µ–º
    data = fetch_func()
    cache.set(key, (data, time.time() + timeout), timeout)
    return data
```

#### Stale Data (—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ)

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å, –Ω–æ –≤ –∫–µ—à–µ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è.

**–†–µ—à–µ–Ω–∏—è:**
- –ö–æ—Ä–æ—Ç–∫–∏–π TTL
- –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π

---

### üí° –ü—Ä–∏–º–µ—Ä

```python
# –í–º–µ—Å—Ç–æ:
Article.objects.filter(published=True).order_by('-date')[:5]

# –õ—É—á—à–µ:
articles = cache.get('homepage_articles')
if not articles:
    articles = Article.objects.filter(...).all()
    cache.set('homepage_articles', articles, timeout=3600)
```

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –∫–æ—Ä–æ—á–µ:

```python
articles = cache.get_or_set(
    "homepage:articles:v1",
    lambda: Article.objects.filter(published=True).order_by("-date")[:5],
    timeout=3600,
)
```

–°—á—ë—Ç—á–∏–∫–∏ (–∑–∞–≤–∏—Å—è—Ç –æ—Ç backend, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è Redis/Memcached):

```python
cache.incr("counter:visits", ignore_key_check=True)
# cache.decr("counter:visits")
```


---

## üì¶ –í–∞—Ä–∏–∞–Ω—Ç—ã backends

| –•—Ä–∞–Ω–∏–ª–∏—â–µ  | –ü–ª—é—Å—ã                                     | –ú–∏–Ω—É—Å—ã                       |
|------------|-------------------------------------------|------------------------------|
| Redis      | –ë—ã—Å—Ç—Ä–æ, —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø–∞–º—è—Ç–∏, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è | –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —Å–µ—Ä–≤–µ—Ä–∞  |
| Memcached  | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π, –ø—Ä–æ—Å—Ç–æ–π                    | –¢–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∫–ª—é—á–∏       |
| FileBased  | –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–æ–≤                       | –ú–µ–¥–ª–µ–Ω–Ω—ã–π –Ω–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–∞—Ö |
| Database   | –ù–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å               | –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î               |
| DummyCache | –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç (–¥–ª—è dev)                | –ù–µ—Ç –∫–µ—à–∞ :)                  |

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–µ—à–∞ (–ø—Ä–∏–º–µ—Ä Redis)

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ backend:

```bash
python -m pip install django-redis
```


```python
CACHES = {
    "default": {
        "BACKEND": "django_redis.cache.RedisCache",
        "LOCATION": "redis://127.0.0.1:6379/1",
        "OPTIONS": {"CLIENT_CLASS": "django_redis.client.DefaultClient"},
        "TIMEOUT": 3600,
        "KEY_PREFIX": "myapp",
    }
}
```

---

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from django.core.cache import cache

cache.set("key", "value", timeout=60)
cache.get("key")  # "value"
cache.delete("key")
```

–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:

```python
cache.set_many({"a": 1, "b": 2})
cache.get_many(["a", "b"])
cache.delete_many(["a", "b"])
```

---

### üî¢ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–µ—à–∞

–í–µ—Ä—Å–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–µ—à –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –∫–ª—é—á–µ–π ‚Äî –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ:

```python
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –≤–µ—Ä—Å–∏–µ–π
cache.set("articles", data, version=1)

# –ß—Ç–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
cache.get("articles", version=1)

# –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç –≤–µ—Ä—Å–∏–∏ (–∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç–∞—Ä—ã–π –∫–µ—à)
cache.incr_version("articles")

# –ì–ª–æ–±–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤ settings.py
CACHES = {
    "default": {
        # ...
        "VERSION": 1,  # —É–≤–µ–ª–∏—á—å—Ç–µ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –¥–ª—è —Å–±—Ä–æ—Å–∞ –≤—Å–µ–≥–æ –∫–µ—à–∞
    }
}
```

---

### üîÑ –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ ‚Äî —Å–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

> *"There are only two hard things in Computer Science: cache invalidation and naming things."*
> ‚Äî Phil Karlton

–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —É–¥–∞–ª–µ–Ω–∏—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∫–µ—à–µ. –ó–≤—É—á–∏—Ç –ø—Ä–æ—Å—Ç–æ, –Ω–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –∫–æ–≤–∞—Ä–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏.

---

#### ‚ùì –ü–æ—á–µ–º—É —ç—Ç–æ —Å–ª–æ–∂–Ω–æ?

1. **–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.** –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–µ—à–µ–π:
   - –ò–∑–º–µ–Ω–∏–ª–∏ —Å—Ç–∞—Ç—å—é ‚Üí –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å: –∫–µ—à —Å—Ç–∞—Ç—å–∏, –∫–µ—à —Å–ø–∏—Å–∫–∞ —Å—Ç–∞—Ç–µ–π, –∫–µ—à –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∫–µ—à —Ç–µ–≥–æ–≤, –∫–µ—à RSS, –∫–µ—à sitemap...

2. **–†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã.** –ö–µ—à –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö, –∏ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è.

3. **Race conditions.** –ú–µ–∂–¥—É —á—Ç–µ–Ω–∏–µ–º –∏–∑ –ë–î –∏ –∑–∞–ø–∏—Å—å—é –≤ –∫–µ—à –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è.

4. **–ö–∞—Å–∫–∞–¥–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.** –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞ ‚Üí –≤—Å–µ –µ–≥–æ —Å—Ç–∞—Ç—å–∏ ‚Üí –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Å—Ç–∞—Ç—å—è–º...

---

#### üõ†Ô∏è –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏

##### 1. TTL-based (Time To Live)

**–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Ö–æ–¥** ‚Äî –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞—Ä–µ–≤–∞—é—Ç —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.

```python
cache.set("articles:list", articles, timeout=300)  # 5 –º–∏–Ω—É—Ç
```

‚úÖ **–ü–ª—é—Å—ã:** –ü—Ä–æ—Å—Ç–æ—Ç–∞, –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
‚ùå **–ú–∏–Ω—É—Å—ã:** –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –î–∞–Ω–Ω—ã–µ, –≥–¥–µ –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–æ–ø—É—Å—Ç–∏–º–∞ (–Ω–æ–≤–æ—Å—Ç–∏, –∫–∞—Ç–∞–ª–æ–≥)
- –í–Ω–µ—à–Ω–∏–µ API (–∫—É—Ä—Å—ã –≤–∞–ª—é—Ç ‚Äî –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ä–∞–∑ –≤ —á–∞—Å)

---

##### 2. Event-based (—á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã)

**–Ø–≤–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

```python
# blog/signals.py
from django.core.cache import cache
from django.db.models.signals import post_save, post_delete
from django.dispatch import receiver
from .models import Article


@receiver([post_save, post_delete], sender=Article)
def invalidate_article_cache(sender, instance, **kwargs):
    """–°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–µ—à –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—å–∏."""
    # 1. –ö–µ—à –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç–∞—Ç—å–∏
    cache.delete(f"article:{instance.pk}")

    # 2. –ö–µ—à —Å–ø–∏—Å–∫–∞ —Å—Ç–∞—Ç–µ–π (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)
    cache.delete("homepage:articles")
    cache.delete(f"category:{instance.category_id}:articles")

    # 3. –ö–µ—à –∞–≤—Ç–æ—Ä–∞
    cache.delete(f"author:{instance.author_id}:articles")
```

‚úÖ **–ü–ª—é—Å—ã:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
‚ùå **–ú–∏–Ω—É—Å—ã:** –ù—É–∂–Ω–æ –∑–Ω–∞—Ç—å –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏, –ª–µ–≥–∫–æ —á—Ç–æ-—Ç–æ –∑–∞–±—ã—Ç—å

> üìå –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å–∏–≥–Ω–∞–ª–∞—Ö ‚Äî –≤ [–ª–µ–∫—Ü–∏–∏ 26](lesson26.md).

---

##### 3. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π

**–í–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è** ‚Äî –º–µ–Ω—è–µ–º –≤–µ—Ä—Å–∏—é, —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏ –ø—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.

```python
# –ì–ª–æ–±–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –≤—Å–µ—Ö —Å—Ç–∞—Ç–µ–π
ARTICLES_VERSION = cache.get("articles:version", 1)

def get_articles():
    key = f"articles:list:v{ARTICLES_VERSION}"
    return cache.get_or_set(key, fetch_articles, timeout=3600)

def invalidate_articles():
    # –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ–º –≤–µ—Ä—Å–∏—é ‚Äî –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è "–º—É—Å–æ—Ä–æ–º"
    cache.incr("articles:version")
```

‚úÖ **–ü–ª—é—Å—ã:** –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å, –Ω–µ—Ç race conditions
‚ùå **–ú–∏–Ω—É—Å—ã:** –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–Ω–∏–º–∞—é—Ç –ø–∞–º—è—Ç—å –¥–æ eviction

---

##### 4. Tag-based –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è

**–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–ª—é—á–µ–π –ø–æ —Ç–µ–≥–∞–º** ‚Äî –º–æ–∂–Ω–æ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë, —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å —Ç–µ–≥–æ–º.

```python
# –ü—Å–µ–≤–¥–æ–∫–æ–¥ (—Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
cache.set("article:1", data, tags=["articles", "category:5", "author:3"])
cache.set("article:2", data, tags=["articles", "category:5", "author:7"])

# –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º –≤—Å—ë –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 5
cache.invalidate_tag("category:5")  # —É–¥–∞–ª–∏—Ç article:1 –∏ article:2
```

> üí° Django –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–µ–≥–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `django-cacheops` –∏–ª–∏ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ —á–µ—Ä–µ–∑ Redis Sets.

---

##### 5. Write-through —Å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

**–û–±–Ω–æ–≤–ª—è–µ–º –∫–µ—à —Å—Ä–∞–∑—É** –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ –ë–î.

```python
def update_article(article_id, data):
    article = Article.objects.get(pk=article_id)
    for key, value in data.items():
        setattr(article, key, value)
    article.save()

    # –°—Ä–∞–∑—É –æ–±–Ω–æ–≤–ª—è–µ–º –∫–µ—à (–Ω–µ —É–¥–∞–ª—è–µ–º!)
    cache.set(f"article:{article_id}", article, timeout=3600)

    # –ù–æ —Å–ø–∏—Å–∫–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º
    cache.delete("homepage:articles")
```

‚úÖ **–ü–ª—é—Å—ã:** –ù–µ—Ç cache miss –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚ùå **–ú–∏–Ω—É—Å—ã:** –°–ª–æ–∂–Ω–µ–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å–ø–∏—Å–∫–æ–≤

---

#### ‚ö†Ô∏è –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

##### 1. –ó–∞–±—ã–ª–∏ –ø—Ä–æ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–µ—à–∏

```python
# ‚ùå –ü–ª–æ—Ö–æ ‚Äî –∑–∞–±—ã–ª–∏ –ø—Ä–æ —Å–ø–∏—Å–æ–∫
@receiver(post_save, sender=Article)
def invalidate(sender, instance, **kwargs):
    cache.delete(f"article:{instance.pk}")
    # –ê homepage:articles –æ—Å—Ç–∞–ª—Å—è —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏!
```

##### 2. Race condition –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

```python
# ‚ùå –ü–ª–æ—Ö–æ ‚Äî –º–µ–∂–¥—É get –∏ set –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è
article = Article.objects.get(pk=1)  # –≤–µ—Ä—Å–∏—è 1
# ... –∫—Ç–æ-—Ç–æ –æ–±–Ω–æ–≤–∏–ª —Å—Ç–∞—Ç—å—é –¥–æ –≤–µ—Ä—Å–∏–∏ 2 ...
cache.set("article:1", article)  # –∑–∞–ø–∏—Å–∞–ª–∏ —É—Å—Ç–∞—Ä–µ–≤—à—É—é –≤–µ—Ä—Å–∏—é 1!
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `get_or_set` –∏–ª–∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.

##### 3. –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

```python
# ‚ùå –ü–ª–æ—Ö–æ ‚Äî –∫–µ—à —É–¥–∞–ª–∏—Ç—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—Ç–∏—Ç—Å—è
with transaction.atomic():
    article.save()
    cache.delete(f"article:{article.pk}")  # –û–ø–∞—Å–Ω–æ!
    raise Exception("Rollback")  # –ö–µ—à —É–∂–µ —É–¥–∞–ª—ë–Ω, –Ω–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
```

**–†–µ—à–µ–Ω–∏–µ:** –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:

```python
from django.db import transaction

def save_article(article):
    article.save()
    transaction.on_commit(
        lambda: cache.delete(f"article:{article.pk}")
    )
```

---

#### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

| –°—Ü–µ–Ω–∞—Ä–∏–π                           | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥         |
|------------------------------------|------------------------------|
| –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–æ–µ–∫—Ç, –¥–æ–ø—É—Å—Ç–∏–º–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ | TTL (5-15 –º–∏–Ω—É—Ç)             |
| –ö—Ä–∏—Ç–∏—á–Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å              | Event-based + —Å–∏–≥–Ω–∞–ª—ã        |
| –ú–Ω–æ–≥–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π          | –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ —Ç–µ–≥–∏     |
| –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –∑–∞–ø–∏—Å—å         | Write-through                |
| –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã                       | Event-driven (—á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥–∏) |

---

#### üí° –ü–∞—Ç—Ç–µ—Ä–Ω: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è

–í–º–µ—Å—Ç–æ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–Ω—ã—Ö `cache.delete()` ‚Äî –æ–¥–∏–Ω –º–æ–¥—É–ª—å:

```python
# cache_utils.py
from django.core.cache import cache
from django.db import transaction


class CacheInvalidator:
    """–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞."""

    @staticmethod
    def invalidate_article(article_id: int, category_id: int = None):
        """–ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Å–µ –∫–µ—à–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–æ —Å—Ç–∞—Ç—å—ë–π."""
        keys = [
            f"article:{article_id}",
            "homepage:articles",
            "sitemap:articles",
        ]
        if category_id:
            keys.append(f"category:{category_id}:articles")

        cache.delete_many(keys)

    @staticmethod
    def invalidate_article_on_commit(article):
        """–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏."""
        transaction.on_commit(
            lambda: CacheInvalidator.invalidate_article(
                article.pk,
                article.category_id
            )
        )
```

---

## üß± –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ view

```python
from django.views.decorators.cache import cache_page


@cache_page(60 * 15)
def my_view(request):
    ...
```

–ò–ª–∏ –≤ `urls.py`:

```python
path("foo/", cache_page(900)(views.foo_view))
```

---

## üß∞ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

```django
{% load cache %}
{% cache 300 sidebar %}
    ...HTML sidebar...
{% endcache %}
```

---

## üß© Per-site –∫–µ—à —á–µ—Ä–µ–∑ middleware

```python
MIDDLEWARE = [
    "django.middleware.cache.UpdateCacheMiddleware",
    # ...
    "django.middleware.cache.FetchFromCacheMiddleware",
]
CACHE_MIDDLEWARE_SECONDS = 300
```

## üßº –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞

```python
cache.clear()
```

---

## ‚õî –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–µ—à–∞ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–π view

```python
from django.views.decorators.cache import never_cache


@never_cache
def dynamic_view(request):
    ...
```

---

## üìå –ò—Ç–æ–≥–∏

- **NoSQL** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–º –ë–î –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (–∫–µ—à, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –≥—Ä–∞—Ñ—ã).
- **CAP-—Ç–µ–æ—Ä–µ–º–∞** ‚Äî –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ 2 –∏–∑ 3: Consistency, Availability, Partition Tolerance.
- **Redis** ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–µ—à–∞, —Å–µ—Å—Å–∏–π, –æ—á–µ—Ä–µ–¥–µ–π, rate limiting.
- **–ö—É–∫–∏** ‚Äî –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–±—Ä–∞—É–∑–µ—Ä–µ), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
- **–°–µ—Å—Å–∏–∏** ‚Äî –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ sessionid.
- **–ö–µ—à** ‚Äî –±—ã—Å—Ç—Ä–∞—è –ø–∞–º—è—Ç—å –¥–ª—è **—É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã**, –Ω–µ —Å–≤—è–∑–∞–Ω–∞ –Ω–∞–ø—Ä—è–º—É—é —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
- **–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞** ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–≥–Ω–∞–ª—ã –∏–ª–∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## üß† –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è

1. –ß–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –∫—É–∫–∏ –æ—Ç —Å–µ—Å—Å–∏–π?
2. –ü–æ—á–µ–º—É —Å–µ—Å—Å–∏–∏ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–µ–∑–¥–µ?
3. –ì–¥–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Django —Ö—Ä–∞–Ω–∏—Ç —Å–µ—Å—Å–∏–∏?
4. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `request.session['key']['value']`?
5. –ö–∞–∫ –±—ã –≤—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã?
6. –ö–∞–∫ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Å—Å–∏–∏, —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π?
7. –ö–∞–∫–æ–π SESSION_ENGINE –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ production –∏ –ø–æ—á–µ–º—É?
8. –ó–∞—á–µ–º –Ω—É–∂–Ω—ã Signed Cookies?

---

## üìù –ü—Ä–∞–∫—Ç–∏–∫–∞ –Ω–∞ –∑–∞–Ω—è—Ç–∏–∏

1. **–†–∞–±–æ—Ç–∞ —Å —Å–µ—Å—Å–∏—è–º–∏:**
   - –°–æ–∑–¥–∞–π—Ç–µ view, –∫–æ—Ç–æ—Ä–∞—è —Å—á–∏—Ç–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –†–µ–∞–ª–∏–∑—É–π—Ç–µ "–∫–æ—Ä–∑–∏–Ω—É" —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ä–µ–∑ —Å–µ—Å—Å–∏–∏

2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ó–∞–∫–µ—à–∏—Ä—É–π—Ç–µ —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
   - –î–æ–±–∞–≤—å—Ç–µ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–µ—à–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏

---

## üè† –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ

### –ó–∞–¥–∞–Ω–∏–µ 1: –°—á—ë—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å—Ç–∞—Ç—å–∏
–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å—á—ë—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –¥–ª—è —Å—Ç–∞—Ç–µ–π –±–ª–æ–≥–∞:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Å—Å–∏–∏, —á—Ç–æ–±—ã –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∫—Ä—É—á–∏–≤–∞–ª –ø—Ä–æ—Å–º–æ—Ç—Ä—ã
- –•—Ä–∞–Ω–∏—Ç–µ —Å—á—ë—Ç—á–∏–∫ –≤ Redis –¥–ª—è –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ —Å –ë–î

### –ó–∞–¥–∞–Ω–∏–µ 2: ¬´–ù–µ–¥–∞–≤–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ¬ª
–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª ¬´–ù–µ–¥–∞–≤–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏¬ª:
- –•—Ä–∞–Ω–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π –≤ —Å–µ—Å—Å–∏–∏
- –û—Ç–æ–±—Ä–∞–∂–∞–π—Ç–µ –∏—Ö –≤ —Å–∞–π–¥–±–∞—Ä–µ

### –ó–∞–¥–∞–Ω–∏–µ 3: Rate Limiting
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤:
- –ù–µ –±–æ–ª–µ–µ 5 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –º–∏–Ω—É—Ç—É –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–∞

### –ó–∞–¥–∞–Ω–∏–µ 4: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
–î–ª—è –±–ª–æ–≥–∞ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ:
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Ç–∞—Ç–µ–π –Ω–∞ 10 –º–∏–Ω—É—Ç
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç–∞—Ç—å–∏ –Ω–∞ 1 —á–∞—Å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞—Ç—å–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–≥–Ω–∞–ª—ã `post_save` –∏ `post_delete`

### ‚≠ê –ë–æ–Ω—É—Å: –°–µ—Å—Å–∏–∏ –≤ Redis
- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –Ω–∞ Redis (`cached_db`)
- –°—Ä–∞–≤–Ω–∏—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å database backend
- –ù–∞–ø–∏—à–∏—Ç–µ management-–∫–æ–º–∞–Ω–¥—É –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Å—Å–∏–π

---

[‚Üê –õ–µ–∫—Ü–∏—è 24: ClassBaseView](lesson24.md) | [–õ–µ–∫—Ü–∏—è 26: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ. Middleware. Signals. Messages. Manage commands ‚Üí](lesson26.md)
